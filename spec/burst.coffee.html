<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title> - burst.coffee</title>

  <link rel="stylesheet" href="../../assets/style.css">
  
    
      <style>
        
      </style>
    
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>
  <meta name="groc-relative-root" content="../../"/>
  <meta name="groc-document-path" content="../spec/burst.coffee"/>
  
</head>
<body>
  <div id="file-area">
    <div id="meta">
      <code class="file-path">
      
        <a href="https://github.com/legomushroom/mojs.git/blob/master/../spec/burst.coffee">../spec/burst.coffee</a>
      
      </code>
    </div>
    <div id="document">
    
      <div class="segment">
      
      
        <div class="code"><div class="wrapper">Transit = mojs.Transit
Swirl   = mojs.Swirl
Burst   = mojs.Burst
t       = mojs.tweener

describe <span class="hljs-string">'Burst -&gt;'</span>, <span class="hljs-function">-&gt;</span>
  beforeEach -&gt; t.removeAll()

  describe <span class="hljs-string">'extension -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should extend Transit class'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      expect(burst <span class="hljs-keyword">instanceof</span> Transit).toBe <span class="hljs-literal">true</span>
    it <span class="hljs-string">'should have its own defaults'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst</div></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>skip childOptions from extendDefaults</p>
</div>
        </div>
      
      
        <div class="code"><div class="wrapper">      expect(burst.skipProps.childOptions).toBe <span class="hljs-number">1</span></div></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>presentation props</p>
</div>
        </div>
      
      
        <div class="code"><div class="wrapper">      expect(burst.defaults.degree) .toBe       <span class="hljs-number">360</span>
      expect(burst.defaults.count) .toBe        <span class="hljs-number">5</span>
      expect(burst.defaults.opacity).toBe       <span class="hljs-number">1</span>
      expect(burst.defaults.randomAngle) .toBe  <span class="hljs-number">0</span>
      expect(burst.defaults.randomRadius).toBe  <span class="hljs-number">0</span></div></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>position props/el props</p>
</div>
        </div>
      
      
        <div class="code"><div class="wrapper">      expect(burst.defaults.x).toBe       <span class="hljs-number">100</span>
      expect(burst.defaults.y).toBe       <span class="hljs-number">100</span>
      expect(burst.defaults.shiftX).toBe  <span class="hljs-number">0</span>
      expect(burst.defaults.shiftY).toBe  <span class="hljs-number">0</span></div></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>size props</p>
</div>
        </div>
      
      
        <div class="code"><div class="wrapper">      expect(burst.defaults.radius[<span class="hljs-number">25</span>]) .toBe  <span class="hljs-number">75</span>
      expect(burst.defaults.angle)      .toBe  <span class="hljs-number">0</span>
      expect(burst.defaults.size)       .toBe  <span class="hljs-literal">null</span>
      expect(burst.defaults.sizeGap)    .toBe  <span class="hljs-number">0</span></div></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>callbacks</p>
</div>
        </div>
      
      
        <div class="code"><div class="wrapper">      expect(burst.defaults.onStart)        .toBe  <span class="hljs-literal">null</span>
      expect(burst.defaults.onComplete)     .toBe  <span class="hljs-literal">null</span>
      expect(burst.defaults.onCompleteChain).toBe  <span class="hljs-literal">null</span>
      expect(burst.defaults.onUpdate)       .toBe  <span class="hljs-literal">null</span>

    it <span class="hljs-string">'should have childDefaults'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      expect(burst.childDefaults.radius[<span class="hljs-number">7</span>]).toBe <span class="hljs-number">0</span>
      expect(burst.childDefaults.points)   .toBe <span class="hljs-number">3</span>
      expect(burst.childDefaults.angle)    .toBe <span class="hljs-number">0</span></div></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>callbacks</p>
</div>
        </div>
      
      
        <div class="code"><div class="wrapper">      expect(burst.childDefaults.onStart)   .toBe <span class="hljs-literal">null</span>
      expect(burst.childDefaults.onComplete).toBe <span class="hljs-literal">null</span>
      expect(burst.childDefaults.onUpdate)  .toBe <span class="hljs-literal">null</span>
      expect(burst.childDefaults.duration)         .toBe  <span class="hljs-number">500</span>
      expect(burst.childDefaults.delay)            .toBe  <span class="hljs-number">0</span>
      expect(burst.childDefaults.repeat)           .toBe  <span class="hljs-number">0</span>
      expect(burst.childDefaults.yoyo)             .toBe  <span class="hljs-literal">false</span>
      expect(burst.childDefaults.easing)           .toBe  <span class="hljs-string">'Linear.None'</span>
      expect(burst.childDefaults.type)             .toBe  <span class="hljs-string">'circle'</span>
      expect(burst.childDefaults.fill)             .toBe  <span class="hljs-string">'deeppink'</span>
      expect(burst.childDefaults.fillOpacity)      .toBe  <span class="hljs-number">1</span>
      expect(burst.childDefaults.stroke)           .toBe  <span class="hljs-string">'transparent'</span>
      expect(burst.childDefaults.strokeWidth)      .toBe  <span class="hljs-number">0</span>
      expect(burst.childDefaults.strokeDasharray)  .toBe  <span class="hljs-string">''</span>
      expect(burst.childDefaults.strokeDashoffset) .toBe  <span class="hljs-string">''</span>
      expect(burst.childDefaults.strokeLinecap)    .toBe  <span class="hljs-literal">null</span>
      expect(burst.childDefaults.isSwirl)          .toBe  <span class="hljs-literal">false</span>
      expect(burst.childDefaults.swirlSize)        .toBe  <span class="hljs-number">10</span>
      expect(burst.childDefaults.swirlFrequency)   .toBe  <span class="hljs-number">3</span>
    
    it <span class="hljs-string">'should have optionsIntersection object'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      expect(burst.optionsIntersection.radius)    .toBe <span class="hljs-number">1</span>
      expect(burst.optionsIntersection.radiusX)   .toBe <span class="hljs-number">1</span>
      expect(burst.optionsIntersection.radiusY)   .toBe <span class="hljs-number">1</span>
      expect(burst.optionsIntersection.opacity)   .toBe <span class="hljs-number">1</span>
      expect(burst.optionsIntersection.angle)     .toBe <span class="hljs-number">1</span>
      expect(burst.optionsIntersection.onUpdate)  .toBe <span class="hljs-number">1</span>
      expect(burst.optionsIntersection.onStart)   .toBe <span class="hljs-number">1</span>
      expect(burst.optionsIntersection.onComplete).toBe <span class="hljs-number">1</span>
      expect(Object.keys(burst.optionsIntersection).length).toBe <span class="hljs-number">8</span>

  describe <span class="hljs-string">'initialization -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should create transits'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      expect(burst.transits.length).toBe <span class="hljs-number">5</span>
      expect(burst.transits[<span class="hljs-number">0</span>] <span class="hljs-keyword">instanceof</span> Swirl).toBe <span class="hljs-literal">true</span>

    it <span class="hljs-string">'should pass indexes to transits'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      expect(burst.transits.length).toBe <span class="hljs-number">5</span>
      expect(burst.transits[<span class="hljs-number">0</span>].o.index).toBe <span class="hljs-number">0</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.index).toBe <span class="hljs-number">1</span>
      expect(burst.transits[<span class="hljs-number">2</span>].o.index).toBe <span class="hljs-number">2</span>
      expect(burst.transits[<span class="hljs-number">3</span>].o.index).toBe <span class="hljs-number">3</span>
      expect(burst.transits[<span class="hljs-number">4</span>].o.index).toBe <span class="hljs-number">4</span>

    it <span class="hljs-string">'should pass properties to transits'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">stroke</span>: <span class="hljs-string">'red'</span>
        <span class="hljs-attribute">strokeWidth</span>:    {<span class="hljs-number">10</span>:<span class="hljs-number">0</span>}
        <span class="hljs-attribute">strokeOpacity</span>:  {<span class="hljs-number">1</span>:<span class="hljs-number">0</span>}
        <span class="hljs-attribute">strokeDasharray</span>:  <span class="hljs-string">'200 10 0'</span>
        <span class="hljs-attribute">strokeDashoffset</span>: <span class="hljs-string">'50'</span>
        <span class="hljs-attribute">strokeLinecap</span>:    <span class="hljs-string">'round'</span>
        <span class="hljs-attribute">fill</span>: <span class="hljs-string">'deeppink'</span>
        <span class="hljs-attribute">fillOpacity</span>: .<span class="hljs-number">5</span>
        <span class="hljs-attribute">type</span>: <span class="hljs-string">'rect'</span>
        <span class="hljs-attribute">swirlSize</span>: <span class="hljs-number">20</span>
        <span class="hljs-attribute">swirlFrequency</span>: <span class="hljs-string">'rand(10,20)'</span>
        <span class="hljs-attribute">count</span>: <span class="hljs-number">6</span>
        <span class="hljs-attribute">isSwirl</span>: <span class="hljs-literal">true</span>
        <span class="hljs-attribute">radius</span>: {<span class="hljs-string">'rand(10,20)'</span>: <span class="hljs-number">100</span>}
        <span class="hljs-attribute">childOptions</span>:
          <span class="hljs-attribute">stroke</span>: [ <span class="hljs-string">'deeppink'</span>, <span class="hljs-string">'yellow'</span>, <span class="hljs-literal">null</span> ]
          <span class="hljs-attribute">strokeWidth</span>: [<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">20</span>]
          <span class="hljs-attribute">strokeOpacity</span>: [<span class="hljs-literal">null</span>, <span class="hljs-number">1</span> ,<span class="hljs-literal">null</span>]
          <span class="hljs-attribute">fill</span>:   [<span class="hljs-string">'#fff'</span>, <span class="hljs-literal">null</span>]
          <span class="hljs-attribute">type</span>:   [<span class="hljs-string">'circle'</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">'polygon'</span>]
          <span class="hljs-attribute">swirlSize</span>: [<span class="hljs-number">10</span>, <span class="hljs-literal">null</span>]
          <span class="hljs-attribute">swirlFrequency</span>: [<span class="hljs-literal">null</span>, <span class="hljs-number">3</span>]
          <span class="hljs-attribute">radius</span>: [ { <span class="hljs-number">20</span>: <span class="hljs-number">50</span>}, <span class="hljs-number">20</span>, <span class="hljs-string">'500'</span> ]
          <span class="hljs-attribute">strokeDasharray</span>: [<span class="hljs-string">'10 20'</span>, <span class="hljs-literal">null</span>, { <span class="hljs-string">'40'</span>: <span class="hljs-string">'10'</span> }]
          <span class="hljs-attribute">strokeDashoffset</span>: [<span class="hljs-string">'200'</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>]
          <span class="hljs-attribute">fillOpacity</span>:  [<span class="hljs-literal">null</span>, <span class="hljs-number">1</span>]
          <span class="hljs-attribute">strokeLinecap</span>: [<span class="hljs-string">'butt'</span>, <span class="hljs-literal">null</span>]
          <span class="hljs-attribute">points</span>: [<span class="hljs-number">10</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">10</span>]

      expect(burst.transits[<span class="hljs-number">0</span>].o.radius[<span class="hljs-number">20</span>]).toBe <span class="hljs-number">50</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.radius)    .toBe <span class="hljs-number">20</span>
      expect(burst.transits[<span class="hljs-number">2</span>].o.radius)    .toBe <span class="hljs-string">'500'</span>
      expect(burst.transits[<span class="hljs-number">3</span>].o.radius[<span class="hljs-number">20</span>]).toBe <span class="hljs-number">50</span>
      expect(burst.transits[<span class="hljs-number">4</span>].o.radius)    .toBe <span class="hljs-number">20</span>
      
      expect(burst.transits[<span class="hljs-number">1</span>].o.stroke)    .toBe <span class="hljs-string">'yellow'</span>
      expect(burst.transits[<span class="hljs-number">2</span>].o.stroke)    .toBe <span class="hljs-string">'red'</span>
      expect(burst.transits[<span class="hljs-number">3</span>].o.stroke)    .toBe <span class="hljs-string">'deeppink'</span>

      expect(burst.transits[<span class="hljs-number">3</span>].o.strokeWidth[<span class="hljs-number">10</span>]).toBe <span class="hljs-number">0</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.strokeWidth[<span class="hljs-number">10</span>]).toBe <span class="hljs-number">0</span>
      expect(burst.transits[<span class="hljs-number">2</span>].o.strokeWidth).toBe <span class="hljs-number">20</span>

      expect(burst.transits[<span class="hljs-number">0</span>].o.fill)      .toBe <span class="hljs-string">'#fff'</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.fill)      .toBe <span class="hljs-string">'deeppink'</span>

      expect(burst.transits[<span class="hljs-number">0</span>].o.fillOpacity).toBe .<span class="hljs-number">5</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.fillOpacity).toBe <span class="hljs-number">1</span>

      expect(burst.transits[<span class="hljs-number">0</span>].o.isSwirl)       .toBe  <span class="hljs-literal">true</span>
      expect(burst.transits[<span class="hljs-number">0</span>].o.swirlSize)     .toBe  <span class="hljs-number">10</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.swirlSize)     .toBe  <span class="hljs-number">20</span>
      
      expect(burst.transits[<span class="hljs-number">0</span>].o.swirlFrequency).toBe  <span class="hljs-string">'rand(10,20)'</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.swirlFrequency).toBe  <span class="hljs-number">3</span>
      
      expect(burst.transits[<span class="hljs-number">0</span>].o.type).toBe     <span class="hljs-string">'circle'</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.type).toBe     <span class="hljs-string">'rect'</span>
      expect(burst.transits[<span class="hljs-number">2</span>].o.type).toBe     <span class="hljs-string">'polygon'</span>

      expect(burst.transits[<span class="hljs-number">0</span>].o.strokeOpacity[<span class="hljs-number">1</span>]).toBe     <span class="hljs-number">0</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.strokeOpacity)   .toBe     <span class="hljs-number">1</span>
      expect(burst.transits[<span class="hljs-number">2</span>].o.strokeOpacity[<span class="hljs-number">1</span>]).toBe     <span class="hljs-number">0</span>

      expect(burst.transits[<span class="hljs-number">0</span>].o.strokeDasharray).toBe        <span class="hljs-string">'10 20'</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.strokeDasharray).toBe        <span class="hljs-string">'200 10 0'</span>
      expect(burst.transits[<span class="hljs-number">2</span>].o.strokeDasharray[<span class="hljs-string">'40'</span>]).toBe  <span class="hljs-string">'10'</span>

      expect(burst.transits[<span class="hljs-number">0</span>].o.strokeDashoffset).toBe  <span class="hljs-string">'200'</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.strokeDashoffset).toBe  <span class="hljs-string">'50'</span>
      expect(burst.transits[<span class="hljs-number">2</span>].o.strokeDashoffset).toBe  <span class="hljs-string">'50'</span>

      expect(burst.transits[<span class="hljs-number">0</span>].o.strokeLinecap).toBe  <span class="hljs-string">'butt'</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.strokeLinecap).toBe  <span class="hljs-string">'round'</span>
      expect(burst.transits[<span class="hljs-number">2</span>].o.strokeLinecap).toBe  <span class="hljs-string">'butt'</span>

      expect(burst.transits[<span class="hljs-number">0</span>].o.points).toBe  <span class="hljs-number">10</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.points).toBe  <span class="hljs-number">3</span>
      expect(burst.transits[<span class="hljs-number">2</span>].o.points).toBe  <span class="hljs-number">10</span>

    it <span class="hljs-string">'should keep the bit angle'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">cound</span>: <span class="hljs-number">2</span>
        <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">angle</span>: [<span class="hljs-number">10</span>, <span class="hljs-literal">null</span>]
      expect(burst.transits[<span class="hljs-number">0</span>].o.angle).toBe <span class="hljs-number">100</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.angle).toBe <span class="hljs-number">162</span>

    it <span class="hljs-string">'should keep the bit angle if delta passed'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">cound</span>: <span class="hljs-number">2</span>
        <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">angle</span>: [{<span class="hljs-number">200</span>: <span class="hljs-number">10</span>}, <span class="hljs-literal">null</span>]
      expect(burst.transits[<span class="hljs-number">0</span>].o.angle[<span class="hljs-number">290</span>]).toBe <span class="hljs-number">100</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.angle)     .toBe <span class="hljs-number">162</span>

    it <span class="hljs-string">'should not keep the bit angle if isResetAngles is passed'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">cound</span>: <span class="hljs-number">2</span>
        <span class="hljs-attribute">isResetAngles</span>: <span class="hljs-literal">true</span>
        <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">angle</span>: [{<span class="hljs-number">200</span>: <span class="hljs-number">10</span>}, <span class="hljs-literal">null</span>]
      expect(burst.transits[<span class="hljs-number">0</span>].o.angle[<span class="hljs-number">200</span>]).toBe <span class="hljs-number">10</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.angle)     .toBe <span class="hljs-number">0</span>

    it <span class="hljs-string">'should pass x/y to transits'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">radius</span>: { <span class="hljs-number">50</span>: <span class="hljs-number">75</span> }
        <span class="hljs-attribute">count</span>: <span class="hljs-number">2</span>
      center = burst.props.center
      expect(burst.transits[<span class="hljs-number">0</span>].o.x).toBe center
      expect(burst.transits[<span class="hljs-number">0</span>].o.y[center - <span class="hljs-number">50</span>]).toBe center - <span class="hljs-number">75</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.x).toBe center
      expect(burst.transits[<span class="hljs-number">1</span>].o.y[center + <span class="hljs-number">50</span>]).toBe center + <span class="hljs-number">75</span>

  describe <span class="hljs-string">'fillTransform method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'return tranform string of the el'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">shiftX</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">shiftY</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">angle</span>: <span class="hljs-number">50</span>
      expect(burst.fillTransform())
        .toBe <span class="hljs-string">'rotate(50deg) translate(100px, 100px)'</span>

  describe <span class="hljs-string">'isNeedsTransform method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'return boolean if fillTransform needed'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">shiftX</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">shiftY</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">angle</span>: <span class="hljs-number">50</span>
      expect(burst.isNeedsTransform()).toBe <span class="hljs-literal">true</span>

  describe <span class="hljs-string">'getOption method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should return an option obj based on i -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">radius</span>: [ { <span class="hljs-number">20</span>: <span class="hljs-number">50</span>}, <span class="hljs-number">20</span>, <span class="hljs-string">'500'</span> ]
      option0 = burst.getOption <span class="hljs-number">0</span>
      option1 = burst.getOption <span class="hljs-number">1</span>
      option7 = burst.getOption <span class="hljs-number">7</span>
      expect(option0.radius[<span class="hljs-number">20</span>]).toBe <span class="hljs-number">50</span>
      expect(option1.radius)    .toBe <span class="hljs-number">20</span>
      expect(option7.radius)    .toBe <span class="hljs-number">20</span>
    it <span class="hljs-string">'should try to fallback to childDefaiults first -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">2000</span>
        <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">radius</span>: [ <span class="hljs-number">200</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">'500'</span> ]
      option0 = burst.getOption <span class="hljs-number">0</span>
      option1 = burst.getOption <span class="hljs-number">1</span>
      option7 = burst.getOption <span class="hljs-number">7</span>
      option8 = burst.getOption <span class="hljs-number">8</span>
      expect(option0.radius)   .toBe <span class="hljs-number">200</span>
      expect(option1.radius[<span class="hljs-number">7</span>]).toBe <span class="hljs-number">0</span>
      expect(option7.radius[<span class="hljs-number">7</span>]).toBe <span class="hljs-number">0</span>
      expect(option8.radius)   .toBe <span class="hljs-string">'500'</span>
    it <span class="hljs-string">'should fallback to parent prop if defined  -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">2000</span>
        <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">duration</span>: [ <span class="hljs-number">200</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">'500'</span> ]
      option0 = burst.getOption <span class="hljs-number">0</span>
      option1 = burst.getOption <span class="hljs-number">1</span>
      option7 = burst.getOption <span class="hljs-number">7</span>
      option8 = burst.getOption <span class="hljs-number">8</span>
      expect(option0.duration).toBe <span class="hljs-number">200</span>
      expect(option1.duration).toBe <span class="hljs-number">2000</span>
      expect(option7.duration).toBe <span class="hljs-number">2000</span>
      expect(option8.duration).toBe <span class="hljs-string">'500'</span>
    it <span class="hljs-string">'should fallback to parent default -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">duration</span>: [ <span class="hljs-number">200</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">'500'</span> ]
      option0 = burst.getOption <span class="hljs-number">0</span>
      option1 = burst.getOption <span class="hljs-number">1</span>
      option7 = burst.getOption <span class="hljs-number">7</span>
      option8 = burst.getOption <span class="hljs-number">8</span>
      expect(option0.duration).toBe <span class="hljs-number">200</span>
      expect(option1.duration).toBe <span class="hljs-number">500</span>
      expect(option7.duration).toBe <span class="hljs-number">500</span>
      expect(option8.duration).toBe <span class="hljs-string">'500'</span>
    it <span class="hljs-string">'should have all the props filled -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">duration</span>: [ <span class="hljs-number">200</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">'500'</span> ]
      option0 = burst.getOption <span class="hljs-number">0</span>
      option1 = burst.getOption <span class="hljs-number">1</span>
      option7 = burst.getOption <span class="hljs-number">7</span>
      option8 = burst.getOption <span class="hljs-number">8</span>
      expect(option0.radius[<span class="hljs-number">7</span>]).toBe <span class="hljs-number">0</span>
      expect(option1.radius[<span class="hljs-number">7</span>]).toBe <span class="hljs-number">0</span>
      expect(option7.radius[<span class="hljs-number">7</span>]).toBe <span class="hljs-number">0</span>
      expect(option8.radius[<span class="hljs-number">7</span>]).toBe <span class="hljs-number">0</span>
    it <span class="hljs-string">'should have parent only options -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">radius</span>: { <span class="hljs-string">'rand(10,20)'</span>: <span class="hljs-number">100</span> }
        <span class="hljs-attribute">angle</span>: {<span class="hljs-number">50</span>: <span class="hljs-number">0</span>}
        <span class="hljs-attribute">onUpdate</span>:<span class="hljs-function">-&gt;</span>
        <span class="hljs-attribute">onStart</span>:<span class="hljs-function">-&gt;</span>
        <span class="hljs-attribute">onComplete</span>:<span class="hljs-function">-&gt;</span>
      option0 = burst.getOption <span class="hljs-number">0</span>
      expect(option0.radius[<span class="hljs-number">7</span>]) .toBe <span class="hljs-number">0</span>
      expect(option0.angle)     .toBe <span class="hljs-number">0</span>
      expect(option0.onUpdate)  .toBe <span class="hljs-literal">null</span>
      expect(option0.onStart)   .toBe <span class="hljs-literal">null</span>
      expect(option0.onComplete).toBe <span class="hljs-literal">null</span></div></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>it &#39;should recieve options object -&gt;&#39;, -&gt;
  burst = new Burst
    childOptions: radius: [ { 20: 50}, 20, &#39;500&#39; ]
  o = childOptions: radius: [ { 20: 51}, 21, &#39;501&#39; ]
  option0 = burst.getOption 0, o
  option1 = burst.getOption 1, o
  option7 = burst.getOption 7, o
  expect(option0.radius[20]).toBe 51
  expect(option1.radius)    .toBe 21
  expect(option7.radius)    .toBe 21</p>
</div>
        </div>
      
      
        <div class="code"><div class="wrapper">  describe <span class="hljs-string">'getPropByMod method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should return the prop from @o based on i -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">radius</span>: [ { <span class="hljs-number">20</span>: <span class="hljs-number">50</span>}, <span class="hljs-number">20</span>, <span class="hljs-string">'500'</span> ]
      opt0 = burst.getPropByMod <span class="hljs-attribute">key</span>: <span class="hljs-string">'radius'</span>, <span class="hljs-attribute">i</span>: <span class="hljs-number">0</span>
      opt1 = burst.getPropByMod <span class="hljs-attribute">key</span>: <span class="hljs-string">'radius'</span>, <span class="hljs-attribute">i</span>: <span class="hljs-number">1</span>
      opt2 = burst.getPropByMod <span class="hljs-attribute">key</span>: <span class="hljs-string">'radius'</span>, <span class="hljs-attribute">i</span>: <span class="hljs-number">2</span>
      opt8 = burst.getPropByMod <span class="hljs-attribute">key</span>: <span class="hljs-string">'radius'</span>, <span class="hljs-attribute">i</span>: <span class="hljs-number">8</span>
      expect(opt0[<span class="hljs-number">20</span>]).toBe <span class="hljs-number">50</span>
      expect(opt1)    .toBe <span class="hljs-number">20</span>
      expect(opt2)    .toBe <span class="hljs-string">'500'</span>
      expect(opt8)    .toBe <span class="hljs-string">'500'</span>

    it <span class="hljs-string">'should the same prop if not an array -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>
      opt0 = burst.getPropByMod <span class="hljs-attribute">key</span>: <span class="hljs-string">'radius'</span>, <span class="hljs-attribute">i</span>: <span class="hljs-number">0</span>
      opt1 = burst.getPropByMod <span class="hljs-attribute">key</span>: <span class="hljs-string">'radius'</span>, <span class="hljs-attribute">i</span>: <span class="hljs-number">1</span>
      opt8 = burst.getPropByMod <span class="hljs-attribute">key</span>: <span class="hljs-string">'radius'</span>, <span class="hljs-attribute">i</span>: <span class="hljs-number">8</span>
      expect(opt0).toBe <span class="hljs-number">20</span>
      expect(opt1).toBe <span class="hljs-number">20</span>
      expect(opt8).toBe <span class="hljs-number">20</span>
    it <span class="hljs-string">'should work with another options object -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">radius</span>: <span class="hljs-number">40</span>
        <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>
      from = burst.o
      opt0 = burst.getPropByMod <span class="hljs-attribute">key</span>: <span class="hljs-string">'radius'</span>, <span class="hljs-attribute">i</span>: <span class="hljs-number">0</span>, <span class="hljs-attribute">from</span>: from
      opt1 = burst.getPropByMod <span class="hljs-attribute">key</span>: <span class="hljs-string">'radius'</span>, <span class="hljs-attribute">i</span>: <span class="hljs-number">1</span>, <span class="hljs-attribute">from</span>: from
      opt8 = burst.getPropByMod <span class="hljs-attribute">key</span>: <span class="hljs-string">'radius'</span>, <span class="hljs-attribute">i</span>: <span class="hljs-number">8</span>, <span class="hljs-attribute">from</span>: from
      expect(opt0).toBe <span class="hljs-number">40</span>
      expect(opt1).toBe <span class="hljs-number">40</span>
      expect(opt8).toBe <span class="hljs-number">40</span>

  describe <span class="hljs-string">'randomness -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    describe <span class="hljs-string">'random angle -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      it <span class="hljs-string">'should have randomAngle option -&gt;'</span>, <span class="hljs-function">-&gt;</span>
        burst = <span class="hljs-keyword">new</span> Burst
        expect(burst.props.randomAngle).toBeDefined()
        expect(burst.props.randomAngle).toBe <span class="hljs-number">0</span>
      it <span class="hljs-string">'should calculate angleRand for every transit -&gt;'</span>, <span class="hljs-function">-&gt;</span>
        burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">randomAngle</span>: <span class="hljs-literal">true</span>
        expect(burst.transits[<span class="hljs-number">0</span>].o.angleShift).toBeDefined()
        expect(burst.transits[<span class="hljs-number">1</span>].o.angleShift).toBeDefined()
    describe <span class="hljs-string">'random radius -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      it <span class="hljs-string">'should have randomRadius option -&gt;'</span>, <span class="hljs-function">-&gt;</span>
        burst = <span class="hljs-keyword">new</span> Burst
        expect(burst.props.randomRadius).toBeDefined()
        expect(burst.props.randomRadius).toBe <span class="hljs-number">0</span>
      it <span class="hljs-string">'should calculate radiusRand for every transit -&gt;'</span>, <span class="hljs-function">-&gt;</span>
        burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">randomRadius</span>: <span class="hljs-literal">true</span>
        expect(burst.transits[<span class="hljs-number">0</span>].o.radiusScale).toBeDefined()
        expect(burst.transits[<span class="hljs-number">1</span>].o.radiusScale).toBeDefined()
  describe <span class="hljs-string">'size calculations calcSize method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    
    it <span class="hljs-string">'should calculate size based on largest transit + self radius'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>
        <span class="hljs-attribute">childOptions</span>:
          <span class="hljs-attribute">radius</span>:      [{ <span class="hljs-number">20</span>: <span class="hljs-number">50</span> }, <span class="hljs-number">20</span>]
          <span class="hljs-attribute">strokeWidth</span>: <span class="hljs-number">20</span>
      
      expect(burst.props.size)  .toBe <span class="hljs-number">240</span>
      expect(burst.props.center).toBe <span class="hljs-number">120</span>


    it <span class="hljs-string">'should calculate size based on largest transit + self radius #2'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>, <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">100</span>
        <span class="hljs-attribute">childOptions</span>:
          <span class="hljs-attribute">radius</span>:      [{ <span class="hljs-number">20</span>: <span class="hljs-number">50</span> }, <span class="hljs-number">20</span>]
          <span class="hljs-attribute">strokeWidth</span>: <span class="hljs-number">20</span>
      expect(burst.props.size)  .toBe <span class="hljs-number">340</span>
      expect(burst.props.center).toBe <span class="hljs-number">170</span>
    it <span class="hljs-string">'should calculate size based on largest transit + self radius #3'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">radius</span>: {<span class="hljs-number">20</span>: <span class="hljs-number">50</span>}, <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">20</span>
        <span class="hljs-attribute">childOptions</span>:
          <span class="hljs-attribute">radius</span>:      [{ <span class="hljs-number">20</span>: <span class="hljs-number">50</span> }, <span class="hljs-number">20</span>]
          <span class="hljs-attribute">strokeWidth</span>: <span class="hljs-number">20</span>
      expect(burst.props.size)  .toBe <span class="hljs-number">240</span>
      expect(burst.props.center).toBe <span class="hljs-number">120</span>
    it <span class="hljs-string">'should calculate size based on largest transit + self radius #4'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>, <span class="hljs-attribute">radiusY</span>: {<span class="hljs-number">20</span>: <span class="hljs-number">100</span>}
        <span class="hljs-attribute">childOptions</span>:
          <span class="hljs-attribute">radius</span>:      [{ <span class="hljs-number">20</span>: <span class="hljs-number">50</span> }, <span class="hljs-number">20</span>]
          <span class="hljs-attribute">strokeWidth</span>: <span class="hljs-number">20</span>
      expect(burst.props.size)  .toBe <span class="hljs-number">340</span>
      expect(burst.props.center).toBe <span class="hljs-number">170</span>
    it <span class="hljs-string">'should calculate size based on largest transit + self radius #5'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">childOptions</span>:
          <span class="hljs-attribute">radius</span>:      [{ <span class="hljs-number">20</span>: <span class="hljs-number">50</span> }, <span class="hljs-number">20</span>]
          <span class="hljs-attribute">strokeWidth</span>: <span class="hljs-number">20</span>
      expect(burst.props.size)  .toBe <span class="hljs-number">290</span>
      expect(burst.props.center).toBe <span class="hljs-number">145</span>
    it <span class="hljs-string">'should call the calcSize of every transit'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">childOptions</span>:
          <span class="hljs-attribute">radius</span>:      [{ <span class="hljs-number">20</span>: <span class="hljs-number">50</span> }, <span class="hljs-number">20</span>]
          <span class="hljs-attribute">strokeWidth</span>: <span class="hljs-number">20</span>
      spyOn burst.transits[<span class="hljs-number">0</span>], <span class="hljs-string">'calcSize'</span>
      spyOn burst.transits[<span class="hljs-number">1</span>], <span class="hljs-string">'calcSize'</span>
      burst.calcSize()
      expect(burst.transits[<span class="hljs-number">0</span>].calcSize).toHaveBeenCalled()
      expect(burst.transits[<span class="hljs-number">1</span>].calcSize).toHaveBeenCalled()
    it <span class="hljs-string">'should call addBitOptions method'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      spyOn burst, <span class="hljs-string">'addBitOptions'</span>
      burst.calcSize()
      expect(burst.addBitOptions).toHaveBeenCalled()

    it <span class="hljs-string">'should work with sizeGap'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">sizeGap</span>: <span class="hljs-number">20</span>
        <span class="hljs-attribute">childOptions</span>:
          <span class="hljs-attribute">radius</span>:      [{ <span class="hljs-number">20</span>: <span class="hljs-number">50</span> }, <span class="hljs-number">20</span>]
          <span class="hljs-attribute">strokeWidth</span>: <span class="hljs-number">20</span>
      expect(burst.props.size)  .toBe <span class="hljs-number">330</span>
      expect(burst.props.center).toBe burst.props.size/<span class="hljs-number">2</span>

  describe <span class="hljs-string">'addBitOptions method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should set x/y on every transit'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: {<span class="hljs-number">0</span>: <span class="hljs-number">120</span>}
      expect(<span class="hljs-keyword">typeof</span> burst.transits[<span class="hljs-number">1</span>].o.x).toBe <span class="hljs-string">'object'</span>
    it <span class="hljs-string">'should work if end radius is 0'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: {<span class="hljs-number">120</span>: <span class="hljs-number">0</span>}
      x = burst.transits[<span class="hljs-number">1</span>].o.x; keys = Object.keys x
      expect(x[keys[<span class="hljs-number">0</span>]]+<span class="hljs-string">''</span>).<span class="hljs-keyword">not</span>.toBe keys[<span class="hljs-number">0</span>]
    it <span class="hljs-string">'should work with radiusX'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">radius</span>: {<span class="hljs-number">120</span>: <span class="hljs-number">0</span>}, <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">30</span>
      expect(parseInt(burst.transits[<span class="hljs-number">1</span>].o.x,<span class="hljs-number">10</span>)).toBe <span class="hljs-number">155</span>
    it <span class="hljs-string">'should work with radiusY'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">radius</span>: {<span class="hljs-number">120</span>: <span class="hljs-number">0</span>}, <span class="hljs-attribute">radiusY</span>: {<span class="hljs-number">30</span>: <span class="hljs-number">0</span>}
      keys = Object.keys(burst.transits[<span class="hljs-number">1</span>].o.y)
      center = burst.props.center
      expect(burst.transits[<span class="hljs-number">1</span>].o.y[keys[<span class="hljs-number">0</span>]]).toBe center
    it <span class="hljs-string">'should increase angle and position delta on angleShift'</span>, <span class="hljs-function">-&gt;</span>
      burst1 = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: {<span class="hljs-number">120</span>: <span class="hljs-number">0</span>}, <span class="hljs-attribute">count</span>: <span class="hljs-number">2</span>
      burst2 = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: {<span class="hljs-number">120</span>: <span class="hljs-number">0</span>}, <span class="hljs-attribute">count</span>: <span class="hljs-number">2</span>, <span class="hljs-attribute">randomAngle</span>: .<span class="hljs-number">5</span>
      expect(burst2.transits[<span class="hljs-number">1</span>].o.angle)
        .toBe burst1.transits[<span class="hljs-number">1</span>].o.angle+burst2.transits[<span class="hljs-number">1</span>].props.angleShift

    it <span class="hljs-string">'should increase angle and position delta on angleShift for deltas'</span>, <span class="hljs-function">-&gt;</span>
      burst1 = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">radius</span>: {<span class="hljs-number">120</span>: <span class="hljs-number">0</span>}, <span class="hljs-attribute">count</span>: <span class="hljs-number">2</span>, <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">angle</span>: {<span class="hljs-number">25</span>: <span class="hljs-number">50</span>}
      burst2 = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">isIt</span>: <span class="hljs-literal">true</span>
        <span class="hljs-attribute">radius</span>: {<span class="hljs-number">120</span>: <span class="hljs-number">0</span>}, <span class="hljs-attribute">count</span>: <span class="hljs-number">2</span>, <span class="hljs-attribute">randomAngle</span>: <span class="hljs-number">1</span>
        <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">angle</span>: {<span class="hljs-number">25</span>: <span class="hljs-number">50</span>}
      start2 = burst2.transits[<span class="hljs-number">1</span>].deltas.angle.start
      end2   = burst2.transits[<span class="hljs-number">1</span>].deltas.angle.start
      start1 = burst1.transits[<span class="hljs-number">1</span>].deltas.angle.start
      end1   = burst1.transits[<span class="hljs-number">1</span>].deltas.angle.start
      expect(start2)
        .toBe start1+burst2.transits[<span class="hljs-number">1</span>].props.angleShift
      expect(end2)
        .toBe end1+burst2.transits[<span class="hljs-number">1</span>].props.angleShift
    it <span class="hljs-string">'should increase position'</span>, <span class="hljs-function">-&gt;</span>
      burst1 = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>, <span class="hljs-attribute">count</span>: <span class="hljs-number">2</span>
      burst2 = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>, <span class="hljs-attribute">count</span>: <span class="hljs-number">2</span>, <span class="hljs-attribute">randomAngle</span>: .<span class="hljs-number">5</span>
      expect(burst2.transits[<span class="hljs-number">1</span>].o.x)
        .<span class="hljs-keyword">not</span>.toBe burst1.transits[<span class="hljs-number">1</span>].o.x
      expect(burst2.transits[<span class="hljs-number">1</span>].o.y)
        .<span class="hljs-keyword">not</span>.toBe burst1.transits[<span class="hljs-number">1</span>].o.y

    it <span class="hljs-string">'should keep degreeCnt not less than 1'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: {<span class="hljs-number">0</span>: <span class="hljs-number">120</span>}, <span class="hljs-attribute">degree</span>: <span class="hljs-number">270</span>, <span class="hljs-attribute">count</span>:  <span class="hljs-number">1</span>
      expect(burst.degreeCnt).toBe <span class="hljs-number">1</span>

  describe <span class="hljs-string">'createTween method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should create tween'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      expect(burst.tween).toBeDefined()
    it <span class="hljs-string">'should add timelines to tween'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      expect(burst.tween.timelines.length).toBe <span class="hljs-number">6</span>
    it <span class="hljs-string">'should call startTween method'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      spyOn burst, <span class="hljs-string">'startTween'</span>
      burst.createTween()
      expect(burst.startTween).toHaveBeenCalled()
    it <span class="hljs-string">'should not call startTween method if isRunLess'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
      spyOn burst, <span class="hljs-string">'startTween'</span>
      burst.createTween()
      expect(burst.startTween).<span class="hljs-keyword">not</span>.toHaveBeenCalled()

  describe <span class="hljs-string">'onStart callback -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should run onStart callback'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">onStart</span>:<span class="hljs-function">-&gt;</span>
      spyOn burst.props, <span class="hljs-string">'onStart'</span>
      burst.run()
      setTimeout -&gt;
        expect(burst.props.onStart).toHaveBeenCalled(); dfr()
      , <span class="hljs-number">300</span>
    it <span class="hljs-string">'should have the scope of burst'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
      isRightScope = <span class="hljs-literal">null</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">onStart</span>:<span class="hljs-function">-&gt;</span> isRightScope = @ <span class="hljs-keyword">instanceof</span> Burst
      setTimeout -&gt;
        expect(isRightScope).toBe(<span class="hljs-literal">true</span>); dfr()
      , <span class="hljs-number">300</span>

  describe <span class="hljs-string">'onComplete callback -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should run onComplete callback'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
      t.removeAll()
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">onComplete</span>:<span class="hljs-function">-&gt;</span> expect(<span class="hljs-literal">true</span>).toBe(<span class="hljs-literal">true</span>); dfr()

    it <span class="hljs-string">'should have the scope of burst'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
      t.removeAll()
      isRightScope = <span class="hljs-literal">false</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">onComplete</span>:<span class="hljs-function">-&gt;</span> isRightScope = @ <span class="hljs-keyword">instanceof</span> Burst
      setTimeout -&gt;
        expect(isRightScope).toBe(<span class="hljs-literal">true</span>); dfr()
      , <span class="hljs-number">300</span>

  describe <span class="hljs-string">'onUpdate callback -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    t.removeAll()
    it <span class="hljs-string">'should run onUpdate callback'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>
        <span class="hljs-attribute">onUpdate</span>:<span class="hljs-function">-&gt;</span>
      spyOn burst, <span class="hljs-string">'onUpdate'</span>
      burst.run()
      setTimeout -&gt;
        expect(burst.onUpdate).toHaveBeenCalledWith(<span class="hljs-number">1</span>); dfr()
      , <span class="hljs-number">300</span>
    it <span class="hljs-string">'should have the scope of burst'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
      t.removeAll()
      isRightScope = <span class="hljs-literal">false</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">onUpdate</span>:<span class="hljs-function">-&gt;</span> isRightScope = @ <span class="hljs-keyword">instanceof</span> Burst
      burst.run()
      setTimeout (<span class="hljs-function">-&gt;</span> expect(isRightScope).toBe(<span class="hljs-literal">true</span>); dfr()), <span class="hljs-number">300</span>
  
  describe <span class="hljs-string">'then method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should call the h.error method'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      spyOn burst.h, <span class="hljs-string">'error'</span>
      burst.<span class="hljs-keyword">then</span>()
      expect(burst.h.error).toHaveBeenCalled()
</div></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>it &#39;should call then method on every transit&#39;, -&gt;
  burst = new Burst
    radius: { 20: 50 }, count: 2
    duration: 10
    childOptions:
      duration: [null, 200]
  spyOn burst.transits[0], &#39;then&#39;
  spyOn burst.transits[1], &#39;then&#39;
  burst.then radius: 0
  expect(burst.transits[0].then).toHaveBeenCalledWith duration: 10
  expect(burst.transits[1].then).toHaveBeenCalledwith duration: 200</p>
</div>
        </div>
      
      
        <div class="code"><div class="wrapper">  describe <span class="hljs-string">'run method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should call extendDefaults'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: { <span class="hljs-number">20</span>: <span class="hljs-number">50</span> }
      spyOn burst, <span class="hljs-string">'extendDefaults'</span>
      o = { <span class="hljs-attribute">radius</span>: <span class="hljs-number">10</span>}
      burst.run o
      expect(burst.extendDefaults).toHaveBeenCalledWith o
    it <span class="hljs-string">'should not call extendDefaults if no obj passed'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: { <span class="hljs-number">20</span>: <span class="hljs-number">50</span> }
      spyOn burst, <span class="hljs-string">'extendDefaults'</span>
      burst.run()
      expect(burst.extendDefaults).<span class="hljs-keyword">not</span>.toHaveBeenCalled()
    it <span class="hljs-string">'should recieve new options'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: { <span class="hljs-number">20</span>: <span class="hljs-number">50</span> }
      burst.run <span class="hljs-attribute">radius</span>: <span class="hljs-number">10</span>
      expect(burst.props.radius).toBe  <span class="hljs-number">10</span>
      expect(burst.deltas.radius).<span class="hljs-keyword">not</span>.toBeDefined()
    it <span class="hljs-string">'should recieve new child options'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: { <span class="hljs-number">20</span>: <span class="hljs-number">50</span> }, <span class="hljs-attribute">duration</span>: <span class="hljs-number">400</span>
      burst.run <span class="hljs-attribute">duration</span>: <span class="hljs-number">500</span>, <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">duration</span>: [<span class="hljs-literal">null</span>, <span class="hljs-number">1000</span>, <span class="hljs-literal">null</span>]
      
      expect(burst.o.childOptions).toBeDefined()
      expect(burst.transits[<span class="hljs-number">0</span>].o.duration).toBe <span class="hljs-number">500</span>
      expect(burst.transits[<span class="hljs-number">1</span>].o.duration).toBe <span class="hljs-number">1000</span>
      expect(burst.transits[<span class="hljs-number">2</span>].o.duration).toBe <span class="hljs-number">500</span>

    it <span class="hljs-string">'should recieve extend old childOptions'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">400</span>, <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">fill</span>: <span class="hljs-string">'deeppink'</span>
      newDuration = [<span class="hljs-literal">null</span>, <span class="hljs-number">1000</span>, <span class="hljs-literal">null</span>]
      burst.run <span class="hljs-attribute">duration</span>: <span class="hljs-number">500</span>, <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">duration</span>: newDuration
      expect(burst.o.childOptions.fill)    .toBe <span class="hljs-string">'deeppink'</span>
      expect(burst.o.childOptions.duration).toBe newDuration

    it <span class="hljs-string">'should call recalcDuration on tween'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">400</span>, <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">fill</span>: <span class="hljs-string">'deeppink'</span>
      newDuration = [<span class="hljs-literal">null</span>, <span class="hljs-number">1000</span>, <span class="hljs-literal">null</span>]
      spyOn burst.tween, <span class="hljs-string">'recalcDuration'</span>
      burst.run <span class="hljs-attribute">duration</span>: <span class="hljs-number">500</span>, <span class="hljs-attribute">childOptions</span>: <span class="hljs-attribute">duration</span>: newDuration
      expect(burst.tween.recalcDuration).toHaveBeenCalled()
    it <span class="hljs-string">'should start tween'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      spyOn burst, <span class="hljs-string">'startTween'</span>
      burst.run <span class="hljs-attribute">duration</span>: <span class="hljs-number">500</span>
      expect(burst.startTween).toHaveBeenCalled()
    it <span class="hljs-string">'should call generateRandomAngle method if randomAngle was passed'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">randomAngle</span>: .<span class="hljs-number">1</span>
      spyOn burst, <span class="hljs-string">'generateRandomAngle'</span>
      burst.run()
      expect(burst.generateRandomAngle).toHaveBeenCalled()
    it <span class="hljs-string">'should not call generateRandomAngle method'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      spyOn burst, <span class="hljs-string">'generateRandomAngle'</span>
      burst.run()
      expect(burst.generateRandomAngle).<span class="hljs-keyword">not</span>.toHaveBeenCalled()
    it <span class="hljs-string">'should call generateRandomRadius method if randomAngle was passed'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">randomRadius</span>: .<span class="hljs-number">1</span>
      spyOn burst, <span class="hljs-string">'generateRandomRadius'</span>
      burst.run()
      expect(burst.generateRandomRadius).toHaveBeenCalled()
    it <span class="hljs-string">'should not call generateRandomRadius method'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      spyOn burst, <span class="hljs-string">'generateRandomRadius'</span>
      burst.run()
      expect(burst.generateRandomRadius).<span class="hljs-keyword">not</span>.toHaveBeenCalled()
    it <span class="hljs-string">'should warn if count was passed'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      spyOn burst.h, <span class="hljs-string">'warn'</span>
      burst.run <span class="hljs-attribute">count</span>: <span class="hljs-number">10</span>
      expect(burst.h.warn).toHaveBeenCalled()
  describe <span class="hljs-string">'generateRandomAngle method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should generate random angle based on randomness'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">randomAngle</span>: .<span class="hljs-number">5</span>
      angle = burst.generateRandomAngle()
      expect(angle).toBeGreaterThan     -<span class="hljs-number">1</span>
      expect(angle).<span class="hljs-keyword">not</span>.toBeGreaterThan <span class="hljs-number">180</span>
    it <span class="hljs-string">'should generate random angle based on randomness #2'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">randomAngle</span>: .<span class="hljs-number">75</span>
      angle = burst.generateRandomAngle()
      expect(angle).toBeGreaterThan     -<span class="hljs-number">1</span>
      expect(angle).<span class="hljs-keyword">not</span>.toBeGreaterThan <span class="hljs-number">270</span>
  describe <span class="hljs-string">'generateRandomRadius method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should generate random radius based on randomness'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">randomRadius</span>: .<span class="hljs-number">75</span>
      radius = burst.generateRandomRadius()
      expect(radius).toBeGreaterThan     .<span class="hljs-number">24</span>
      expect(radius).<span class="hljs-keyword">not</span>.toBeGreaterThan <span class="hljs-number">1</span>

  describe <span class="hljs-string">'draw method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should not call drawEl method'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      spyOn burst, <span class="hljs-string">'drawEl'</span>
      burst.draw()
      expect(burst.drawEl).toHaveBeenCalled()
    it <span class="hljs-string">'should call fillTransform method'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      spyOn burst, <span class="hljs-string">'fillTransform'</span>
      burst.draw()
      expect(burst.fillTransform).toHaveBeenCalled()

  describe <span class="hljs-string">'getSideRadius method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should return the side\'s radius, radiusX and radiusY'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: {<span class="hljs-number">5</span>:<span class="hljs-number">25</span>}, <span class="hljs-attribute">radiusX</span>: {<span class="hljs-number">10</span>:<span class="hljs-number">20</span>}, <span class="hljs-attribute">radiusY</span>: {<span class="hljs-number">30</span>:<span class="hljs-number">10</span>}
      sides = burst.getSideRadius(<span class="hljs-string">'start'</span>)
      expect(sides.radius) .toBe <span class="hljs-number">5</span>
      expect(sides.radiusX).toBe <span class="hljs-number">10</span>
      expect(sides.radiusY).toBe <span class="hljs-number">30</span>

  describe <span class="hljs-string">'getSidePoint method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should return the side\'s point'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: {<span class="hljs-number">5</span>:<span class="hljs-number">25</span>}, <span class="hljs-attribute">radiusX</span>: {<span class="hljs-number">10</span>:<span class="hljs-number">20</span>}, <span class="hljs-attribute">radiusY</span>: {<span class="hljs-number">30</span>:<span class="hljs-number">10</span>}
      point = burst.getSidePoint(<span class="hljs-string">'start'</span>, <span class="hljs-number">0</span>)
      expect(point.x).toBeDefined()
      expect(point.y).toBeDefined()

  describe <span class="hljs-string">'getRadiusByKey method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should return the key\'s radius'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst <span class="hljs-attribute">radius</span>: {<span class="hljs-number">5</span>:<span class="hljs-number">25</span>}, <span class="hljs-attribute">radiusX</span>: {<span class="hljs-number">10</span>:<span class="hljs-number">20</span>}, <span class="hljs-attribute">radiusY</span>: {<span class="hljs-number">30</span>:<span class="hljs-number">20</span>}
      radius  = burst.getRadiusByKey(<span class="hljs-string">'radius'</span>,  <span class="hljs-string">'start'</span>)
      radiusX = burst.getRadiusByKey(<span class="hljs-string">'radiusX'</span>, <span class="hljs-string">'start'</span>)
      radiusY = burst.getRadiusByKey(<span class="hljs-string">'radiusX'</span>, <span class="hljs-string">'end'</span>)
      expect(radius).toBe   <span class="hljs-number">5</span>
      expect(radiusX).toBe <span class="hljs-number">10</span>
      expect(radiusY).toBe <span class="hljs-number">20</span>

  describe <span class="hljs-string">'getDeltaFromPoints method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should return the delta'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      delta  = burst.getDeltaFromPoints(<span class="hljs-string">'x'</span>, {<span class="hljs-attribute">x</span>: <span class="hljs-number">10</span>, <span class="hljs-attribute">y</span>: <span class="hljs-number">20</span>}, {<span class="hljs-attribute">x</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">y</span>: <span class="hljs-number">40</span>})
      expect(delta[<span class="hljs-number">10</span>]).toBe <span class="hljs-number">20</span>
    it <span class="hljs-string">'should return one value if start and end positions are equal'</span>, <span class="hljs-function">-&gt;</span>
      burst = <span class="hljs-keyword">new</span> Burst
      delta  = burst.getDeltaFromPoints(<span class="hljs-string">'x'</span>, {<span class="hljs-attribute">x</span>: <span class="hljs-number">10</span>, <span class="hljs-attribute">y</span>: <span class="hljs-number">20</span>}, {<span class="hljs-attribute">x</span>: <span class="hljs-number">10</span>, <span class="hljs-attribute">y</span>: <span class="hljs-number">40</span>})
      expect(delta).toBe <span class="hljs-number">10</span>
















</div></div>
      
      </div>
    
    </div>
  </div>

  <script src="../../toc.js"></script>
  <script src="../../assets/libs.js"></script>
  <script src="../../assets/behavior.js"></script>

  
    
      <script>
        
      </script>
    
  
</body>
</html>