<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title> - transit.coffee</title>

  <link rel="stylesheet" href="../../assets/style.css">
  
    
      <style>
        
      </style>
    
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>
  <meta name="groc-relative-root" content="../../"/>
  <meta name="groc-document-path" content="../spec/transit.coffee"/>
  
</head>
<body>
  <div id="file-area">
    <div id="meta">
      <code class="file-path">
      
        <a href="https://github.com/legomushroom/mojs.git/blob/master/../spec/transit.coffee">../spec/transit.coffee</a>
      
      </code>
    </div>
    <div id="document">
    
      <div class="segment">
      
      
        <div class="code"><div class="wrapper">Byte = mojs.Transit
Bit  = mojs.Bit
Rect = mojs.Rect
h    = mojs.helpers
ns   = <span class="hljs-string">'http://www.w3.org/2000/svg'</span>
svg  = <span class="hljs-built_in">document</span>.createElementNS?(ns, <span class="hljs-string">'svg'</span>)
</div></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>console.log   = -&gt;</p>
</div>
        </div>
      
      
        <div class="code"><div class="wrapper"><span class="hljs-built_in">console</span>.warn  = <span class="hljs-function">-&gt;</span>
<span class="hljs-built_in">console</span>.error = <span class="hljs-function">-&gt;</span>

describe <span class="hljs-string">'Transit -&gt;'</span>, <span class="hljs-function">-&gt;</span>
  it <span class="hljs-string">'should have ownvars function'</span>, <span class="hljs-function">-&gt;</span>
    byte = <span class="hljs-keyword">new</span> Byte
    expect(byte.vars).toBeDefined()
    expect(<span class="hljs-function">-&gt;</span> byte.vars()).<span class="hljs-keyword">not</span>.toThrow()
  describe <span class="hljs-string">'extension -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should extend Bit class'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      expect(byte <span class="hljs-keyword">instanceof</span> Bit).toBe(<span class="hljs-literal">true</span>)
  describe <span class="hljs-string">'defaults object -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should have defaults object'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      expect(byte.defaults).toBeDefined()
  describe <span class="hljs-string">'options object -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should recieve empty options object by default'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      expect(byte.o).toBeDefined()
    it <span class="hljs-string">'should recieve options object'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">option</span>: <span class="hljs-number">1</span>
      expect(byte.o.option).toBe <span class="hljs-number">1</span>

  describe <span class="hljs-string">'index option -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should recieve index option'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">index</span>: <span class="hljs-number">5</span>
      expect(byte.index).toBe <span class="hljs-number">5</span>
    it <span class="hljs-string">'should fallback to 0'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      expect(byte.index).toBe <span class="hljs-number">0</span>

  describe <span class="hljs-string">'isDelta method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should detect if value is not a delta value'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">45</span>, <span class="hljs-attribute">stroke</span>: <span class="hljs-string">'deeppink'</span>: <span class="hljs-string">'pink'</span>
      expect(byte.isDelta(<span class="hljs-number">45</span>))    .toBe <span class="hljs-literal">false</span>
      expect(byte.isDelta(<span class="hljs-string">'45'</span>))  .toBe <span class="hljs-literal">false</span>
      expect(byte.isDelta([<span class="hljs-string">'45'</span>])).toBe <span class="hljs-literal">false</span>
      expect(byte.isDelta({ <span class="hljs-attribute">unit</span>: <span class="hljs-string">'px'</span>, <span class="hljs-attribute">value</span>: <span class="hljs-number">20</span> })).toBe <span class="hljs-literal">false</span>
      expect(byte.isDelta({ <span class="hljs-number">20</span>: <span class="hljs-number">30</span> })).toBe <span class="hljs-literal">true</span>

  describe <span class="hljs-string">'extendDefaults method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should extend defaults object to properties'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">45</span>, <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">50</span>
      expect(byte.props.radius) .toBe(<span class="hljs-number">45</span>)
      expect(byte.props.radiusX).toBe(<span class="hljs-number">50</span>)
      expect(byte.props.radiusY).toBe(<span class="hljs-number">45</span>)
    it <span class="hljs-string">'should extend defaults object to properties if 0'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">0</span>
      expect(byte.props.radius).toBe(<span class="hljs-number">0</span>)
    it <span class="hljs-string">'should extend defaults object to properties if object was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: {<span class="hljs-number">45</span>: <span class="hljs-number">55</span>}
      expect(byte.props.radius).toBe(<span class="hljs-number">45</span>)
    it <span class="hljs-string">'should ignore properties defined in skipProps object'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">45</span>
      byte.skipProps = <span class="hljs-attribute">radius</span>: <span class="hljs-number">1</span>
      byte.o.radius = <span class="hljs-number">50</span>
      byte.extendDefaults()
      expect(byte.props.radius).toBe(<span class="hljs-number">45</span>)</div></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>for burst</p>
</div>
        </div>
      
      
        <div class="code"><div class="wrapper">    it <span class="hljs-string">'should extend defaults object to properties if array was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: [<span class="hljs-number">50</span>, <span class="hljs-number">100</span>]
      expect(byte.props.radius.join <span class="hljs-string">', '</span>).toBe <span class="hljs-string">'50, 100'</span>
    it <span class="hljs-string">'should extend defaults object to properties if rand was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-string">'rand(0, 10)'</span>
      expect(byte.props.radius).toBeDefined()
      expect(byte.props.radius).toBeGreaterThan -<span class="hljs-number">1</span>
      expect(byte.props.radius).<span class="hljs-keyword">not</span>.toBeGreaterThan <span class="hljs-number">10</span>
    it <span class="hljs-string">'should recieve object to iterate from'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>: <span class="hljs-string">'rand(0, 10)'</span>
        <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
        <span class="hljs-attribute">fill</span>: <span class="hljs-string">'deeppink'</span>
      fillBefore = byte.props.fill
      byte.extendDefaults {<span class="hljs-attribute">radius</span>: <span class="hljs-number">10</span>}
      expect(byte.props.radius).toBe <span class="hljs-number">10</span>
      expect(byte.props.fill).toBe fillBefore

    it <span class="hljs-string">'should allways inherit radiusX/Y from radius'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">10</span>
      byte.extendDefaults {<span class="hljs-attribute">radius</span>: <span class="hljs-number">100</span>}
      
      expect(byte.props.radius) .toBe <span class="hljs-number">100</span>
      expect(byte.props.radiusX).toBe <span class="hljs-number">100</span>
      expect(byte.props.radiusY).toBe <span class="hljs-number">100</span>

    it <span class="hljs-string">'should work with new values'</span>, <span class="hljs-function">-&gt;</span>
<span class="hljs-function">      <span class="hljs-title">onStart</span> = -&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">10</span>
      .<span class="hljs-keyword">then</span> <span class="hljs-attribute">onStart</span>: onStart
      expect(byte.history[<span class="hljs-number">1</span>].onStart).toBe onStart

  describe <span class="hljs-string">'stagger values'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should extend defaults object to properties if stagger was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-string">'stagger(200)'</span>
      byte.index = <span class="hljs-number">2</span>
      byte.extendDefaults()
      expect(byte.props.radius).toBe <span class="hljs-number">400</span>

  describe <span class="hljs-string">'skipDelta flag'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should skip delta calcultaions on module'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">ctx</span>: svg, <span class="hljs-attribute">radius</span>: {<span class="hljs-number">20</span>:<span class="hljs-number">30</span>}
      byte.isSkipDelta = <span class="hljs-literal">true</span>
      spyOn byte, <span class="hljs-string">'getDelta'</span>
      byte.extendDefaults byte.o
      expect(byte.getDelta).<span class="hljs-keyword">not</span>.toHaveBeenCalled()

  describe <span class="hljs-string">'options history -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should have history array'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      expect(byte.h.isArray(byte.history)).toBe <span class="hljs-literal">true</span>
    it <span class="hljs-string">'should save options to history array'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>
      expect(byte.history.length).toBe <span class="hljs-number">1</span>
    
    it <span class="hljs-string">'should rewrite the first history item on run'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>
      byte.run <span class="hljs-attribute">radius</span>: <span class="hljs-number">10</span>
      expect(byte.history[<span class="hljs-number">0</span>].radius).toBe <span class="hljs-number">10</span>
    it <span class="hljs-string">'should extend options by defaults on the first add'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">opacity</span>: .<span class="hljs-number">5</span>
      expect(byte.history[<span class="hljs-number">0</span>].radius[<span class="hljs-number">0</span>]).toBe <span class="hljs-number">50</span>
    it <span class="hljs-string">'should extend options by defaults on run first add'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">opacity</span>: .<span class="hljs-number">5</span>
      byte.run()
      expect(byte.history[<span class="hljs-number">0</span>].radius[<span class="hljs-number">0</span>]).toBe <span class="hljs-number">50</span>

  describe <span class="hljs-string">'transformHistory method-&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should add new options to the history'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">0</span>
      byte.transformHistory <span class="hljs-attribute">x</span>: <span class="hljs-number">20</span>
      expect(byte.history[<span class="hljs-number">1</span>].x).toBe <span class="hljs-number">20</span>

    it <span class="hljs-string">'should rewrite options in the history'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">x</span>: <span class="hljs-number">200</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">0</span>
      byte.transformHistory <span class="hljs-attribute">x</span>: <span class="hljs-number">100</span>
      expect(byte.history[<span class="hljs-number">1</span>].x).toBe <span class="hljs-number">100</span>

    it <span class="hljs-string">'should stop rewriting if further option is defined'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">x</span>: <span class="hljs-number">200</span>
        .<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">0</span>
        .<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">0</span>, <span class="hljs-attribute">x</span>: <span class="hljs-number">20</span>

      byte.transformHistory <span class="hljs-attribute">x</span>: <span class="hljs-number">100</span>
      expect(byte.history[<span class="hljs-number">1</span>].x)     .toBe <span class="hljs-number">100</span>
      expect(byte.history[<span class="hljs-number">2</span>].x[<span class="hljs-number">100</span>]).toBe <span class="hljs-number">20</span>
      expect(byte.history[<span class="hljs-number">2</span>].x[<span class="hljs-number">200</span>]).<span class="hljs-keyword">not</span>.toBeDefined()

    it <span class="hljs-string">'should stop rewriting if further option is defined'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">x</span>: <span class="hljs-number">200</span>
        .<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">0</span>
        .<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">0</span>, <span class="hljs-attribute">x</span>: <span class="hljs-number">20</span>
        .<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">0</span>, <span class="hljs-attribute">x</span>: <span class="hljs-number">10</span>

      byte.transformHistory <span class="hljs-attribute">x</span>: <span class="hljs-number">100</span>
      expect(byte.history[<span class="hljs-number">3</span>].x[<span class="hljs-number">20</span>]).toBe <span class="hljs-number">10</span>
    it <span class="hljs-string">'should rewrite until defined if object was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">x</span>: <span class="hljs-number">200</span>
        .<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">0</span>
        .<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">0</span>, <span class="hljs-attribute">x</span>: <span class="hljs-number">20</span>

      byte.transformHistory <span class="hljs-attribute">x</span>: {<span class="hljs-number">100</span>: <span class="hljs-number">50</span>}
      expect(byte.history[<span class="hljs-number">1</span>].x[<span class="hljs-number">100</span>]).toBe <span class="hljs-number">50</span>
      expect(byte.history[<span class="hljs-number">2</span>].x[<span class="hljs-number">50</span>]).toBe <span class="hljs-number">20</span>

  describe <span class="hljs-string">'then method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should add new timeline with options'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">5</span>
      expect(byte.tween.timelines.length).toBe <span class="hljs-number">2</span>

    it <span class="hljs-string">'should return if no options passed or options are empty'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">10</span>
      spyOn byte, <span class="hljs-string">'mergeThenOptions'</span>
      byte.<span class="hljs-keyword">then</span>()
      expect(byte.mergeThenOptions).<span class="hljs-keyword">not</span>.toHaveBeenCalled()

    it <span class="hljs-string">'should inherit radius for radiusX/Y options'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">5</span>
      expect(byte.history[<span class="hljs-number">1</span>].radiusX[<span class="hljs-number">20</span>]).toBe <span class="hljs-number">5</span>

    it <span class="hljs-string">'should pass isChained to timeline'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">5</span>
      expect(byte.tween.timelines[<span class="hljs-number">1</span>].o.isChained).toBe <span class="hljs-literal">true</span>

    it <span class="hljs-string">'should not pass isChained to timeline if delay'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">5</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">100</span>
      expect(byte.tween.timelines[<span class="hljs-number">1</span>].o.isChained).toBe <span class="hljs-literal">false</span>

    it <span class="hljs-string">'should inherit radius for radiusX/Y options in further chain'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">5</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radiusY</span>: <span class="hljs-number">40</span>
      expect(byte.history[<span class="hljs-number">2</span>].radiusX[<span class="hljs-number">20</span>]).toBe  <span class="hljs-number">5</span>
      expect(byte.history[<span class="hljs-number">2</span>].radiusY[<span class="hljs-number">20</span>]).toBe <span class="hljs-number">40</span>

    it <span class="hljs-string">'should inherit radius for radiusX/Y options in further chain #2'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">5</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radiusY</span>: <span class="hljs-number">40</span>, <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">50</span>
      expect(byte.history[<span class="hljs-number">2</span>].radiusX[<span class="hljs-number">5</span>]) .toBe <span class="hljs-number">50</span>
      expect(byte.history[<span class="hljs-number">2</span>].radiusY[<span class="hljs-number">20</span>]).toBe <span class="hljs-number">40</span>

    it <span class="hljs-string">'should add new timeline with options #2'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">10</span>, <span class="hljs-attribute">yoyo</span>: <span class="hljs-literal">true</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">5</span>
      expect(byte.tween.timelines[<span class="hljs-number">1</span>].o.duration).toBe <span class="hljs-number">1000</span>
      expect(byte.tween.timelines[<span class="hljs-number">1</span>].o.yoyo)    .toBe <span class="hljs-literal">false</span>
      expect(byte.tween.timelines[<span class="hljs-number">1</span>].o.delay)   .toBe <span class="hljs-number">1010</span>

    it <span class="hljs-string">'should merge then options and add them to the history'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">10</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">5</span>, <span class="hljs-attribute">yoyo</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">100</span>
      expect(byte.history.length)       .toBe <span class="hljs-number">2</span>
      expect(byte.history[<span class="hljs-number">1</span>].radius[<span class="hljs-number">20</span>]).toBe <span class="hljs-number">5</span>
      expect(byte.history[<span class="hljs-number">1</span>].duration).toBe <span class="hljs-number">1000</span>
      expect(byte.history[<span class="hljs-number">1</span>].delay)   .toBe <span class="hljs-number">100</span>
      expect(byte.history[<span class="hljs-number">1</span>].yoyo)    .toBe <span class="hljs-literal">true</span>

    it <span class="hljs-string">'should always merge then options with the last history item'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">10</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">5</span>, <span class="hljs-attribute">yoyo</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">100</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: {<span class="hljs-number">100</span>:<span class="hljs-number">10</span>}, <span class="hljs-attribute">delay</span>: <span class="hljs-number">0</span>, <span class="hljs-attribute">stroke</span>: <span class="hljs-string">'green'</span>
      expect(byte.history.length)       .toBe <span class="hljs-number">3</span>
      expect(byte.history[<span class="hljs-number">2</span>].radius[<span class="hljs-number">100</span>]).toBe <span class="hljs-number">10</span>
      expect(byte.history[<span class="hljs-number">2</span>].duration).toBe <span class="hljs-number">1000</span>
      expect(byte.history[<span class="hljs-number">2</span>].delay)   .toBe <span class="hljs-number">0</span>
      expect(byte.history[<span class="hljs-number">2</span>].yoyo)    .toBe <span class="hljs-literal">undefined</span>
      expect(byte.history[<span class="hljs-number">2</span>].stroke[<span class="hljs-string">'transparent'</span>]).toBe <span class="hljs-string">'green'</span>

    it <span class="hljs-string">'should not copy callbacks'</span>, <span class="hljs-function">-&gt;</span>
<span class="hljs-function">      <span class="hljs-title">onUpdate</span> = -&gt;</span>
<span class="hljs-function">      <span class="hljs-title">onStart</span>  = -&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">10</span>
        <span class="hljs-attribute">onUpdate</span>:  onUpdate, <span class="hljs-attribute">onStart</span>: onStart
        <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">5</span>, <span class="hljs-attribute">yoyo</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">100</span>

      expect(byte.history.length)       .toBe <span class="hljs-number">2</span>
      expect(byte.history[<span class="hljs-number">1</span>].radius[<span class="hljs-number">20</span>]).toBe <span class="hljs-number">5</span>
      expect(byte.history[<span class="hljs-number">1</span>].duration)  .toBe <span class="hljs-number">1000</span>
      expect(byte.history[<span class="hljs-number">1</span>].delay)     .toBe <span class="hljs-number">100</span>
      expect(byte.history[<span class="hljs-number">1</span>].yoyo)      .toBe <span class="hljs-literal">true</span>
      expect(byte.history[<span class="hljs-number">1</span>].onUpdate)  .toBe <span class="hljs-literal">undefined</span>

      byte.tween.setProgress .<span class="hljs-number">75</span>
      expect(byte.props.onUpdate).<span class="hljs-keyword">not</span>.toBeDefined()
      expect(byte.props.onStart) .<span class="hljs-keyword">not</span>.toBeDefined()

    it <span class="hljs-string">'should bind onUpdate function'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">10</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">5</span>, <span class="hljs-attribute">yoyo</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">100</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: {<span class="hljs-number">100</span>:<span class="hljs-number">10</span>}, <span class="hljs-attribute">delay</span>: <span class="hljs-number">200</span>, <span class="hljs-attribute">stroke</span>: <span class="hljs-string">'green'</span>
      expect(<span class="hljs-keyword">typeof</span> byte.tween.timelines[<span class="hljs-number">1</span>].o.onUpdate).toBe <span class="hljs-string">'function'</span>
      expect(<span class="hljs-keyword">typeof</span> byte.tween.timelines[<span class="hljs-number">2</span>].o.onUpdate).toBe <span class="hljs-string">'function'</span>

    it <span class="hljs-string">'should bind onStart function'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">10</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">5</span>, <span class="hljs-attribute">yoyo</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">100</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: {<span class="hljs-number">100</span>:<span class="hljs-number">10</span>}, <span class="hljs-attribute">delay</span>: <span class="hljs-number">200</span>, <span class="hljs-attribute">stroke</span>: <span class="hljs-string">'green'</span>
      expect(<span class="hljs-keyword">typeof</span> byte.tween.timelines[<span class="hljs-number">1</span>].o.onStart).toBe <span class="hljs-string">'function'</span>
      expect(<span class="hljs-keyword">typeof</span> byte.tween.timelines[<span class="hljs-number">2</span>].o.onStart).toBe <span class="hljs-string">'function'</span>

    it <span class="hljs-string">'should bind onFirstUpdate function'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">10</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">5</span>, <span class="hljs-attribute">yoyo</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">100</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: {<span class="hljs-number">100</span>:<span class="hljs-number">10</span>}, <span class="hljs-attribute">delay</span>: <span class="hljs-number">200</span>, <span class="hljs-attribute">stroke</span>: <span class="hljs-string">'green'</span>
      expect(<span class="hljs-keyword">typeof</span> byte.tween.timelines[<span class="hljs-number">1</span>].o.onFirstUpdate).toBe <span class="hljs-string">'function'</span>
      expect(<span class="hljs-keyword">typeof</span> byte.tween.timelines[<span class="hljs-number">2</span>].o.onFirstUpdate).toBe <span class="hljs-string">'function'</span>

    it <span class="hljs-string">'should bind onFirstUpdate function'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">10</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">5</span>, <span class="hljs-attribute">yoyo</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">100</span>
      byte.<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: {<span class="hljs-number">100</span>:<span class="hljs-number">10</span>}, <span class="hljs-attribute">delay</span>: <span class="hljs-number">200</span>, <span class="hljs-attribute">stroke</span>: <span class="hljs-string">'green'</span>
      expect(<span class="hljs-keyword">typeof</span> byte.tween.timelines[<span class="hljs-number">1</span>].o.onFirstUpdate).toBe <span class="hljs-string">'function'</span>
      expect(<span class="hljs-keyword">typeof</span> byte.tween.timelines[<span class="hljs-number">2</span>].o.onFirstUpdate).toBe <span class="hljs-string">'function'</span>

  describe <span class="hljs-string">'tuneOptions method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should call extendDefaults with options'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      o = <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>
      spyOn byte, <span class="hljs-string">'tuneOptions'</span>
      byte.tuneOptions o
      expect(byte.tuneOptions).toHaveBeenCalled()
    it <span class="hljs-string">'should call calcSize and setElStyles methods'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      spyOn byte, <span class="hljs-string">'calcSize'</span>
      spyOn byte, <span class="hljs-string">'setElStyles'</span>
      byte.tuneOptions <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>
      expect(byte.calcSize).toHaveBeenCalled()
      expect(byte.setElStyles).toHaveBeenCalled()


  describe <span class="hljs-string">'size calculations -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should calculate size el size depending on largest value'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       { <span class="hljs-number">25</span>: -<span class="hljs-number">100</span> }
        <span class="hljs-attribute">strokeWidth</span>:  { <span class="hljs-number">6</span>:  <span class="hljs-number">4</span>    }
      expect(byte.props.size).toBe(<span class="hljs-number">212</span>)

    it <span class="hljs-string">'should calculate size el size based on radiusX/Y'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       { <span class="hljs-number">25</span>: -<span class="hljs-number">100</span> }
        <span class="hljs-attribute">radiusX</span>:      <span class="hljs-number">200</span>
        <span class="hljs-attribute">strokeWidth</span>:  { <span class="hljs-number">6</span>:  <span class="hljs-number">4</span>    }
      expect(byte.props.size).toBe(<span class="hljs-number">412</span>)

    it <span class="hljs-string">'should calculate size el size based on radiusX/Y'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       { <span class="hljs-number">25</span>: -<span class="hljs-number">100</span> }
        <span class="hljs-attribute">radiusX</span>:      <span class="hljs-number">200</span>
        <span class="hljs-attribute">radiusY</span>:      <span class="hljs-number">300</span>
        <span class="hljs-attribute">strokeWidth</span>:  { <span class="hljs-number">6</span>:  <span class="hljs-number">4</span>    }
      expect(byte.props.size).toBe(<span class="hljs-number">612</span>)

    it <span class="hljs-string">'should calculate size el size based on radiusX/Y'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       { <span class="hljs-number">25</span>: -<span class="hljs-number">100</span> }
        <span class="hljs-attribute">radiusY</span>:      <span class="hljs-number">30</span>
        <span class="hljs-attribute">strokeWidth</span>:  { <span class="hljs-number">6</span>:  <span class="hljs-number">4</span>    }
      expect(byte.props.size).toBe(<span class="hljs-number">212</span>)

    it <span class="hljs-string">'should calculate size el size based on radiusX/Y'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       <span class="hljs-number">50</span>
        <span class="hljs-attribute">radiusY</span>:      <span class="hljs-number">30</span>
        <span class="hljs-attribute">strokeWidth</span>:  { <span class="hljs-number">6</span>:  <span class="hljs-number">4</span> }
      expect(byte.props.size).toBe(<span class="hljs-number">112</span>)

    it <span class="hljs-string">'should have sizeGap option'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       { <span class="hljs-number">25</span>: -<span class="hljs-number">100</span> }
        <span class="hljs-attribute">strokeWidth</span>:  { <span class="hljs-number">6</span>:  <span class="hljs-number">4</span>    }
        <span class="hljs-attribute">sizeGap</span>: <span class="hljs-number">40</span>
      expect(byte.props.size).toBe(<span class="hljs-number">292</span>)

    it <span class="hljs-string">'should calculate size el size depending on shape\'s ratio'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       { <span class="hljs-number">25</span>: -<span class="hljs-number">100</span> }
        <span class="hljs-attribute">strokeWidth</span>:  { <span class="hljs-number">6</span>:  <span class="hljs-number">4</span>    }
        <span class="hljs-attribute">type</span>:         <span class="hljs-string">'rect'</span>
      svg = <span class="hljs-built_in">document</span>.createElementNS ns, <span class="hljs-string">'svg'</span>
      rect  = <span class="hljs-keyword">new</span> Rect <span class="hljs-attribute">ctx</span>: svg
      expect(byte.props.size).toBe(<span class="hljs-number">212</span>*rect.ratio)
    it <span class="hljs-string">'should not calculate size el size if size was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       <span class="hljs-number">100</span>
        <span class="hljs-attribute">strokeWidth</span>:  <span class="hljs-number">5</span>
        <span class="hljs-attribute">size</span>: <span class="hljs-number">400</span>
      expect(byte.props.size).toBe(<span class="hljs-number">400</span>)
    it <span class="hljs-string">'should not calculate size el size if external context was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       <span class="hljs-number">100</span>
        <span class="hljs-attribute">strokeWidth</span>:  <span class="hljs-number">5</span>
        <span class="hljs-attribute">size</span>:         <span class="hljs-number">400</span>
        <span class="hljs-attribute">ctx</span>:          svg
      expect(byte.props.size).toBe(<span class="hljs-number">400</span>)
    it <span class="hljs-string">'should calculate center based on el size'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       { <span class="hljs-number">25</span>: -<span class="hljs-number">100</span> }
        <span class="hljs-attribute">strokeWidth</span>:  { <span class="hljs-number">4</span>:  <span class="hljs-number">6</span>    }
      expect(byte.props.size)   .toBe(<span class="hljs-number">212</span>)
      expect(byte.props.center) .toBe(<span class="hljs-number">106</span>)

    it <span class="hljs-string">'should increase size if elastic.out/inout easing'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       { <span class="hljs-number">25</span>: -<span class="hljs-number">100</span> }
        <span class="hljs-attribute">strokeWidth</span>:  { <span class="hljs-number">4</span>:  <span class="hljs-number">6</span>    }
        <span class="hljs-attribute">easing</span>: <span class="hljs-string">'Elastic.Out'</span>
      expect(byte.props.size)   .toBe(<span class="hljs-number">212</span>*<span class="hljs-number">1.25</span>)
      expect(byte.props.center) .toBe(byte.props.size/<span class="hljs-number">2</span>)

      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       { <span class="hljs-number">25</span>: -<span class="hljs-number">100</span> }
        <span class="hljs-attribute">strokeWidth</span>:  { <span class="hljs-number">4</span>:  <span class="hljs-number">6</span>    }
        <span class="hljs-attribute">easing</span>: <span class="hljs-string">'Elastic.InOut'</span>
      expect(byte.props.size)   .toBe(<span class="hljs-number">212</span>*<span class="hljs-number">1.25</span>)
      expect(byte.props.center) .toBe(byte.props.size/<span class="hljs-number">2</span>)


    it <span class="hljs-string">'should increase size if back.out/inout easing'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       { <span class="hljs-number">25</span>: -<span class="hljs-number">100</span> }
        <span class="hljs-attribute">strokeWidth</span>:  { <span class="hljs-number">4</span>:  <span class="hljs-number">6</span>    }
        <span class="hljs-attribute">easing</span>: <span class="hljs-string">'back.Out'</span>
      expect(byte.props.size)   .toBe(<span class="hljs-number">212</span>*<span class="hljs-number">1.1</span>)
      expect(byte.props.center) .toBe(byte.props.size/<span class="hljs-number">2</span>)

      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       { <span class="hljs-number">25</span>: -<span class="hljs-number">100</span> }
        <span class="hljs-attribute">strokeWidth</span>:  { <span class="hljs-number">4</span>:  <span class="hljs-number">6</span>    }
        <span class="hljs-attribute">easing</span>: <span class="hljs-string">'Back.InOut'</span>
      expect(byte.props.size)   .toBe(<span class="hljs-number">212</span>*<span class="hljs-number">1.1</span>)
      expect(byte.props.center) .toBe(byte.props.size/<span class="hljs-number">2</span>)


  describe <span class="hljs-string">'el creation -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should create el'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      expect(byte.el.tagName.toLowerCase()).toBe(<span class="hljs-string">'div'</span>)
    it <span class="hljs-string">'should create context'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      expect(byte.el.firstChild.tagName.toLowerCase()).toBe(<span class="hljs-string">'svg'</span>)
    it <span class="hljs-string">'should set context styles'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      svg = byte.el.firstChild
      expect(svg.style.position)                .toBe <span class="hljs-string">'absolute'</span>
      expect(svg.style.width)                   .toBe <span class="hljs-string">'100%'</span>
      expect(svg.style.height)                  .toBe <span class="hljs-string">'100%'</span>

    it <span class="hljs-string">'should not create context and el if context was passed'</span>, <span class="hljs-function">-&gt;</span>
      svg.isSvg = <span class="hljs-literal">true</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">ctx</span>: svg
      expect(byte.el)           .toBe byte.bit.el
      expect(byte.ctx)          .toBeDefined()
      expect(byte.ctx.isSvg)    .toBe <span class="hljs-literal">true</span>
    it <span class="hljs-string">'should set el size'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       <span class="hljs-number">25</span>
        <span class="hljs-attribute">strokeWidth</span>:  <span class="hljs-number">2</span>
        <span class="hljs-attribute">x</span>:            <span class="hljs-number">10</span>
        <span class="hljs-attribute">y</span>:            <span class="hljs-number">20</span>
        <span class="hljs-attribute">isRunLess</span>:    <span class="hljs-literal">true</span>
      expect(byte.el.style.position)              .toBe <span class="hljs-string">'absolute'</span>
      expect(byte.el.style.width)                 .toBe <span class="hljs-string">'54px'</span>
      expect(byte.el.style.height)                .toBe <span class="hljs-string">'54px'</span>
      expect(byte.el.style.display)               .toBe <span class="hljs-string">'none'</span>
      expect(byte.el.style[<span class="hljs-string">'margin-left'</span>])        .toBe <span class="hljs-string">'-27px'</span>
      expect(byte.el.style[<span class="hljs-string">'margin-top'</span>])         .toBe <span class="hljs-string">'-27px'</span>
      expect(byte.el.style[<span class="hljs-string">'marginLeft'</span>])         .toBe <span class="hljs-string">'-27px'</span>
      expect(byte.el.style[<span class="hljs-string">'marginTop'</span>])          .toBe <span class="hljs-string">'-27px'</span>
      <span class="hljs-comment">#expect(byte.el.style['backface-visibility']).toBe 'hidden'</span>
      <span class="hljs-comment">#expect(byte.el.style["#{h.prefix.css}backface-visibility"]).toBe 'hidden'</span>
      expect(byte.isShown).toBe <span class="hljs-literal">false</span>
    
    it <span class="hljs-string">'should skip props if foreign context'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       <span class="hljs-number">25</span>
        <span class="hljs-attribute">strokeWidth</span>:  <span class="hljs-number">2</span>
        <span class="hljs-attribute">x</span>:            <span class="hljs-number">10</span>
        <span class="hljs-attribute">y</span>:            <span class="hljs-number">20</span>
        <span class="hljs-attribute">isRunLess</span>:    <span class="hljs-literal">true</span>
        <span class="hljs-attribute">ctx</span>: svg
      expect(byte.el.style.display)               .toBe <span class="hljs-string">'none'</span>
      expect(byte.el.style.opacity)               .toBe <span class="hljs-string">'1'</span>

      expect(byte.el.style.position)              .<span class="hljs-keyword">not</span>.toBe <span class="hljs-string">'absolute'</span>
      expect(byte.el.style.width)                 .<span class="hljs-keyword">not</span>.toBe <span class="hljs-string">'54px'</span>
      expect(byte.el.style.height)                .<span class="hljs-keyword">not</span>.toBe <span class="hljs-string">'54px'</span>
      expect(byte.el.style[<span class="hljs-string">'margin-left'</span>])        .<span class="hljs-keyword">not</span>.toBe <span class="hljs-string">'-27px'</span>
      expect(byte.el.style[<span class="hljs-string">'margin-top'</span>])         .<span class="hljs-keyword">not</span>.toBe <span class="hljs-string">'-27px'</span>
      expect(byte.el.style[<span class="hljs-string">'marginLeft'</span>])         .<span class="hljs-keyword">not</span>.toBe <span class="hljs-string">'-27px'</span>
      expect(byte.el.style[<span class="hljs-string">'marginTop'</span>])          .<span class="hljs-keyword">not</span>.toBe <span class="hljs-string">'-27px'</span></div></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>expect(byte.el.style[&#39;backface-visibility&#39;]).not.toBe &#39;hidden&#39;
prefixedProp = &quot;#{h.prefix.css}backface-visibility&quot;
expect(byte.el.style[prefixedProp]).not.toBe &#39;hidden&#39;</p>
</div>
        </div>
      
      
        <div class="code"><div class="wrapper">      expect(byte.isShown).toBe <span class="hljs-literal">false</span>

    it <span class="hljs-string">'should set display: block if isShowInit was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">isShowInit</span>: <span class="hljs-literal">true</span>
      expect(byte.el.style.display).toBe <span class="hljs-string">'block'</span>
      expect(byte.isShown).toBe <span class="hljs-literal">true</span>
    it <span class="hljs-string">'should set el size'</span>, <span class="hljs-function">-&gt;</span></div></div>
      
      </div>
    
      <div class="segment">
      
        <div class="comments ">
          <div class="wrapper"><p>it &#39;should set el size based on remBase&#39;, -&gt;</p>
</div>
        </div>
      
      
        <div class="code"><div class="wrapper">      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>:       <span class="hljs-number">25</span>
        <span class="hljs-attribute">strokeWidth</span>:  <span class="hljs-number">2</span>
        <span class="hljs-attribute">x</span>:            <span class="hljs-number">10</span>
        <span class="hljs-attribute">y</span>:            <span class="hljs-number">20</span>
      byte.isRendered = <span class="hljs-literal">false</span>
      byte.h.remBase = <span class="hljs-number">8</span>
      byte.render()
      byte.h.remBase = <span class="hljs-number">16</span>

      expect(byte.el.style.position)              .toBe <span class="hljs-string">'absolute'</span>
      expect(byte.el.style.width)                 .toBe <span class="hljs-string">'54px'</span>
      expect(byte.el.style.height)                .toBe <span class="hljs-string">'54px'</span>
      expect(byte.el.style[<span class="hljs-string">'margin-left'</span>])        .toBe <span class="hljs-string">'-27px'</span>
      expect(byte.el.style[<span class="hljs-string">'margin-top'</span>])         .toBe <span class="hljs-string">'-27px'</span>
      expect(byte.el.style[<span class="hljs-string">'marginLeft'</span>])         .toBe <span class="hljs-string">'-27px'</span>
      expect(byte.el.style[<span class="hljs-string">'marginTop'</span>])          .toBe <span class="hljs-string">'-27px'</span>
      <span class="hljs-comment">#expect(byte.el.style['backface-visibility']).toBe 'hidden'</span>
      <span class="hljs-comment">#expect(byte.el.style["#{h.prefix.css}backface-visibility"]).toBe 'hidden'</span>
    it <span class="hljs-string">'should create bit'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      expect(byte.bit).toBeDefined()
      expect(byte.bit.o.isDrawLess).toBe <span class="hljs-literal">true</span>
    it <span class="hljs-string">'should create bit based on type option or fallback to line'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
        <span class="hljs-attribute">type</span>:   <span class="hljs-string">'rect'</span>
      byte2 = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      expect(byte.bit.type).toBe  <span class="hljs-string">'rect'</span>
      expect(byte2.bit.type).toBe <span class="hljs-string">'line'</span>

    it <span class="hljs-string">'should add itself to body'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      expect(byte.el.parentNode.tagName.toLowerCase()).toBe(<span class="hljs-string">'body'</span>)
    it <span class="hljs-string">'should add itself to parent if the option was passed'</span>, <span class="hljs-function">-&gt;</span>
      div  = <span class="hljs-built_in">document</span>.createElement?(<span class="hljs-string">'div'</span>)
      div.isDiv = <span class="hljs-literal">true</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
        <span class="hljs-attribute">parent</span>: div
      expect(byte.el.parentNode.isDiv).toBe <span class="hljs-literal">true</span>
  describe <span class="hljs-string">'opacity set -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should set a position with respect to units'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">opacity</span>: .<span class="hljs-number">5</span>
      expect(byte.el.style.opacity).toBe <span class="hljs-string">'0.5'</span>
    it <span class="hljs-string">'should animate opacity'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">opacity</span>: { <span class="hljs-number">1</span>: <span class="hljs-number">0</span>}
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">32</span>
        <span class="hljs-attribute">onComplete</span>:<span class="hljs-function">-&gt;</span> expect(byte.el.style.opacity).toBe(<span class="hljs-string">'0'</span>); dfr()
  describe <span class="hljs-string">'position set -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    describe <span class="hljs-string">'x/y coordinates -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      it <span class="hljs-string">'should set a position with respect to units'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte
          <span class="hljs-attribute">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">y</span>: <span class="hljs-number">50</span>
        expect(byte.el.style.left)   .toBe <span class="hljs-string">'100px'</span>
        expect(byte.el.style.top)    .toBe <span class="hljs-string">'50px'</span>
      it <span class="hljs-string">'should animate position'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte
          <span class="hljs-attribute">x</span>: {<span class="hljs-number">100</span>: <span class="hljs-string">'200px'</span>}
          <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>
          <span class="hljs-attribute">onComplete</span>:<span class="hljs-function">-&gt;</span> expect(byte.el.style.left).toBe(<span class="hljs-string">'200px'</span>); dfr()
      it <span class="hljs-string">'should warn when x/y animated position and not foreign context'</span>,<span class="hljs-function">-&gt;</span>
        spyOn <span class="hljs-built_in">console</span>, <span class="hljs-string">'warn'</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">x</span>: {<span class="hljs-number">100</span>: <span class="hljs-string">'200px'</span>}
        expect(<span class="hljs-built_in">console</span>.warn).toHaveBeenCalled()
      it <span class="hljs-string">'should notwarn when x/y animated position and foreign context'</span>,<span class="hljs-function">-&gt;</span>
        spyOn <span class="hljs-built_in">console</span>, <span class="hljs-string">'warn'</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">x</span>: {<span class="hljs-number">100</span>: <span class="hljs-string">'200px'</span>}, <span class="hljs-attribute">ctx</span>: svg
        expect(<span class="hljs-built_in">console</span>.warn).<span class="hljs-keyword">not</span>.toHaveBeenCalled()
        
      it <span class="hljs-string">'should animate position with respect to units'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte
          <span class="hljs-attribute">x</span>: {<span class="hljs-string">'20%'</span>: <span class="hljs-string">'50%'</span>}
          <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>
        setTimeout -&gt;
          expect(byte.el.style.left)   .toBe <span class="hljs-string">'50%'</span>
          dfr()
        , <span class="hljs-number">300</span>

      it <span class="hljs-string">'end unit that were not specified should fallback to start unit'</span>, <span class="hljs-function"><span class="hljs-params">()</span>-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte
          <span class="hljs-attribute">x</span>: {<span class="hljs-string">'20%'</span>: <span class="hljs-number">50</span>}
          <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>
        expect(byte.deltas.x.start.unit).toBe <span class="hljs-string">'%'</span>
        expect(byte.deltas.x.end.unit)  .toBe <span class="hljs-string">'%'</span>

      it <span class="hljs-string">'should fallback to end units if units are differnt'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte
          <span class="hljs-attribute">x</span>: {<span class="hljs-string">'20%'</span>: <span class="hljs-string">'50px'</span>}
          <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>
          <span class="hljs-attribute">onComplete</span>:<span class="hljs-function">-&gt;</span>
            expect(byte.el.style.left).toBe(<span class="hljs-string">'50px'</span>); dfr()

      describe <span class="hljs-string">'shiftX/shiftY coordinates -&gt;'</span>, <span class="hljs-function">-&gt;</span>
        it <span class="hljs-string">'should set a position with respect to units'</span>, <span class="hljs-function">-&gt;</span>
          byte = <span class="hljs-keyword">new</span> Byte
            <span class="hljs-attribute">shiftX</span>: <span class="hljs-number">100</span>
            <span class="hljs-attribute">shiftY</span>: <span class="hljs-number">50</span>
          expect(byte.el.style.transform).toBe <span class="hljs-string">'translate(100px, 50px)'</span>
        
        it <span class="hljs-string">'should animate position'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
          byte = <span class="hljs-keyword">new</span> Byte
            <span class="hljs-attribute">shiftX</span>: {<span class="hljs-number">100</span>: <span class="hljs-string">'200px'</span>}
            <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>
            <span class="hljs-attribute">onComplete</span>:<span class="hljs-function">-&gt;</span>
              expect(byte.el.style.transform) .toBe <span class="hljs-string">'translate(200px, 0px)'</span>
              dfr()

        it <span class="hljs-string">'should animate position with respect to units'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
          byte = <span class="hljs-keyword">new</span> Byte
            <span class="hljs-attribute">shiftX</span>: {<span class="hljs-string">'20%'</span>: <span class="hljs-string">'50%'</span>}
            <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>
            <span class="hljs-attribute">onComplete</span>:<span class="hljs-function">-&gt;</span>
              expect(byte.el.style.transform).toBe <span class="hljs-string">'translate(50%, 0px)'</span>
              dfr()
        
        it <span class="hljs-string">'should fallback to end units if units are differnt'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
          byte = <span class="hljs-keyword">new</span> Byte
            <span class="hljs-attribute">shiftX</span>: {<span class="hljs-string">'20%'</span>: <span class="hljs-string">'50px'</span>}
            <span class="hljs-attribute">shiftY</span>: { <span class="hljs-number">0</span>: <span class="hljs-string">'50%'</span>}
            <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>
            <span class="hljs-attribute">onComplete</span>:<span class="hljs-function">-&gt;</span>
              expect(byte.el.style.transform).toBe <span class="hljs-string">'translate(50px, 50%)'</span>
              dfr()

  describe <span class="hljs-string">'fillTransform method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'return tranform string of the el'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">shiftX</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">shiftY</span>: <span class="hljs-number">100</span>
      expect(byte.fillTransform()).toBe <span class="hljs-string">'translate(100px, 100px)'</span>
  describe <span class="hljs-string">'isNeedsTransform method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should return boolean if fillTransform needed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">shiftX</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">shiftY</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
      byte.setProp <span class="hljs-attribute">shiftX</span>: <span class="hljs-number">101</span>
      expect(byte.isNeedsTransform()).toBe <span class="hljs-literal">true</span>

    it <span class="hljs-string">'should execute for both x and y '</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">shiftX</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">shiftY</span>: <span class="hljs-number">100</span>
      spyOn byte, <span class="hljs-string">'isPropChanged'</span>
      byte.isNeedsTransform()
      expect(byte.isPropChanged).toHaveBeenCalledWith <span class="hljs-string">'shiftX'</span>
      expect(byte.isPropChanged).toHaveBeenCalledWith <span class="hljs-string">'shiftY'</span>

  describe <span class="hljs-string">'show method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should set display: block to el'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      byte.show()
      expect(byte.el.style.display).toBe <span class="hljs-string">'block'</span>
    it <span class="hljs-string">'should return if isShow is already true'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      byte.show()
      byte.el.style.display = <span class="hljs-string">'inline'</span>
      byte.show()
      expect(byte.el.style.display).toBe <span class="hljs-string">'inline'</span>
  describe <span class="hljs-string">'hide method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should set display: block to el'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      byte.hide()
      expect(byte.el.style.display).toBe <span class="hljs-string">'none'</span>

  describe <span class="hljs-string">'mergeThenOptions method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should merge 2 objects'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      start = <span class="hljs-attribute">radius</span>: <span class="hljs-number">10</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attribute">stroke</span>: <span class="hljs-string">'#ff00ff'</span>
      end   = <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">500</span>
      mergedOpton = byte.mergeThenOptions start, end
      expect(mergedOpton.radius[<span class="hljs-number">10</span>]).toBe <span class="hljs-number">20</span>
      expect(mergedOpton.duration).toBe <span class="hljs-number">500</span>
      expect(mergedOpton.stroke).toBe <span class="hljs-string">'#ff00ff'</span>

    it <span class="hljs-string">'should merge 2 objects if the first was an object'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
      start = <span class="hljs-attribute">radius</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">0</span>}
      end   = <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>
      mergedOpton = byte.mergeThenOptions start, end
      expect(mergedOpton.radius[<span class="hljs-number">0</span>]).toBe <span class="hljs-number">20</span>
    it <span class="hljs-string">'should use the second value if it is an object'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      start = <span class="hljs-attribute">radius</span>: <span class="hljs-number">10</span>
      end   = <span class="hljs-attribute">radius</span>: {<span class="hljs-number">20</span>: <span class="hljs-number">0</span>}
      mergedOpton = byte.mergeThenOptions start, end
      expect(mergedOpton.radius[<span class="hljs-number">20</span>]).toBe <span class="hljs-number">0</span>
    it <span class="hljs-string">'should save the old tween values'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      start = <span class="hljs-attribute">duration</span>: <span class="hljs-number">10</span>
      end   = <span class="hljs-attribute">radius</span>: {<span class="hljs-number">20</span>: <span class="hljs-number">0</span>}
      mergedOpton = byte.mergeThenOptions start, end
      expect(mergedOpton.duration).toBe <span class="hljs-number">10</span>
    it <span class="hljs-string">'should fallback to default value is start is undefined'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      start = <span class="hljs-attribute">radius</span>: <span class="hljs-number">10</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>
      end   = <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">500</span>, <span class="hljs-attribute">stroke</span>: <span class="hljs-string">'#ff00ff'</span>
      mergedOpton = byte.mergeThenOptions start, end
      expect(mergedOpton.stroke[<span class="hljs-string">'transparent'</span>]).toBe <span class="hljs-string">'#ff00ff'</span>

    it <span class="hljs-string">'should use start value if end value is null or undefined'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      start = <span class="hljs-attribute">radius</span>: <span class="hljs-number">10</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-number">1000</span>, <span class="hljs-attribute">fill</span>: <span class="hljs-string">'orange'</span>, <span class="hljs-attribute">points</span>: <span class="hljs-number">5</span>
      end   =
        <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>, <span class="hljs-attribute">duration</span>: <span class="hljs-literal">null</span>, <span class="hljs-attribute">points</span>: <span class="hljs-literal">undefined</span>
        <span class="hljs-attribute">fill</span>: <span class="hljs-literal">null</span>, <span class="hljs-attribute">stroke</span>: <span class="hljs-string">'#ff00ff'</span>
      mergedOpton = byte.mergeThenOptions start, end
      expect(mergedOpton.duration).toBe <span class="hljs-number">1000</span>
      expect(mergedOpton.fill)    .toBe <span class="hljs-string">'orange'</span>
      expect(mergedOpton.points)  .toBe <span class="hljs-number">5</span>

  describe <span class="hljs-string">'render method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should call draw method'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      spyOn byte, <span class="hljs-string">'draw'</span>
      byte.render()
      expect(byte.draw).toHaveBeenCalled()
    it <span class="hljs-string">'should call setElStyles method'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      spyOn byte, <span class="hljs-string">'setElStyles'</span>
      byte.render()
      expect(byte.setElStyles).toHaveBeenCalled()
    it <span class="hljs-string">'should call createBit method'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      spyOn byte, <span class="hljs-string">'createBit'</span>
      byte.isRendered = <span class="hljs-literal">false</span>
      byte.render()
      expect(byte.createBit).toHaveBeenCalled()
    it <span class="hljs-string">'should set isRendered to true method'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      expect(byte.isRendered).toBe <span class="hljs-literal">true</span>
      byte.isRendered = <span class="hljs-literal">false</span>; byte.render()
      expect(byte.isRendered).toBe <span class="hljs-literal">true</span>
    it <span class="hljs-string">'should call calcSize method'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      spyOn byte, <span class="hljs-string">'calcSize'</span>
      byte.isRendered = <span class="hljs-literal">false</span>
      byte.render()
      expect(byte.calcSize).toHaveBeenCalled()

    it <span class="hljs-string">'should not create new el'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      cnt = <span class="hljs-built_in">document</span>.body.children.length
      byte.render <span class="hljs-literal">true</span>
      expect(cnt).toBe <span class="hljs-built_in">document</span>.body.children.length
  

  describe <span class="hljs-string">'draw method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should call setProp method'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      spyOn byte.bit, <span class="hljs-string">'setProp'</span>
      byte.draw()
      expect(byte.bit.setProp).toHaveBeenCalled()
    it <span class="hljs-string">'should set x/y to center'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      byte.draw()
      expect(byte.bit.props.x).toBe byte.props.center
      expect(byte.bit.props.y).toBe byte.props.center
    it <span class="hljs-string">'should set x/y to props.x/props.y if context was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>, <span class="hljs-attribute">ctx</span>: svg
      byte.draw()
      expect(byte.bit.props.x).toBe parseFloat byte.props.x
      expect(byte.bit.props.y).toBe parseFloat byte.props.y
    it <span class="hljs-string">'should call bit.draw method'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      spyOn byte.bit, <span class="hljs-string">'draw'</span>
      byte.draw()
      expect(byte.bit.draw).toHaveBeenCalled()
    it <span class="hljs-string">'should call drawEl method'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      spyOn byte, <span class="hljs-string">'drawEl'</span>
      byte.draw()
      expect(byte.drawEl).toHaveBeenCalled()
    it <span class="hljs-string">'should call calcTransform method'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      spyOn byte, <span class="hljs-string">'calcTransform'</span>
      byte.draw()
      expect(byte.calcTransform).toHaveBeenCalled()
    it <span class="hljs-string">'should recieve the current progress'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      spyOn byte, <span class="hljs-string">'draw'</span>
      byte.setProgress .<span class="hljs-number">5</span>
      expect(byte.draw).toHaveBeenCalledWith .<span class="hljs-number">5</span>
    it <span class="hljs-string">'should calculate transform object'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">angle</span>:        <span class="hljs-number">90</span>
        <span class="hljs-attribute">radius</span>:       <span class="hljs-number">25</span>
        <span class="hljs-attribute">strokeWidth</span>:  <span class="hljs-number">4</span>
      expect(byte.props.transform).toBe(<span class="hljs-string">'rotate(90,29,29)'</span>)
      expect(byte.calcTransform).toBeDefined()
  describe <span class="hljs-string">'drawEl method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should set el positions and transforms'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>, <span class="hljs-attribute">y</span>: <span class="hljs-number">10</span>
      byte.draw()
      expect(byte.el.style.left)      .toBe     <span class="hljs-string">'0px'</span>
      expect(byte.el.style.top)       .toBe     <span class="hljs-string">'10px'</span>
      expect(byte.el.style.opacity)   .toBe     <span class="hljs-string">'1'</span>
      expect(byte.el.style.transform) .toBe     <span class="hljs-string">'translate(0px, 0px)'</span>
    it <span class="hljs-string">'should set only opacity if foreign context'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>, <span class="hljs-attribute">y</span>: <span class="hljs-number">10</span>, <span class="hljs-attribute">ctx</span>: svg
      byte.draw()
      expect(byte.el.style.opacity)   .toBe         <span class="hljs-string">'1'</span>
      expect(byte.el.style.left)      .<span class="hljs-keyword">not</span>.toBe     <span class="hljs-string">'0px'</span>
      expect(byte.el.style.top)       .<span class="hljs-keyword">not</span>.toBe     <span class="hljs-string">'10px'</span>
      expect(byte.el.style.transform) .<span class="hljs-keyword">not</span>.toBe     <span class="hljs-string">'translate(0px, 0px)'</span>
    it <span class="hljs-string">'should set new values'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>, <span class="hljs-attribute">y</span>: <span class="hljs-number">10</span>
      byte.draw()
      byte.props.x = <span class="hljs-string">'1px'</span>
      byte.draw()
      expect(byte.el.style.left)      .toBe     <span class="hljs-string">'1px'</span>
      expect(byte.lastSet.x.value)    .toBe     <span class="hljs-string">'1px'</span>
    it <span class="hljs-string">'should not set old values'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>, <span class="hljs-attribute">y</span>: <span class="hljs-number">10</span>
      byte.draw()
      byte.draw()
      expect(byte.el.style.left)      .toBe     <span class="hljs-string">'0px'</span>
      expect(byte.lastSet.x.value)    .toBe     <span class="hljs-string">'0px'</span>
    it <span class="hljs-string">'should call fillTransform method'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>
      spyOn byte, <span class="hljs-string">'fillTransform'</span>
      byte.setProp <span class="hljs-attribute">shiftX</span>: <span class="hljs-number">20</span>
      byte.draw()
      expect(byte.fillTransform).toHaveBeenCalled()

  describe <span class="hljs-string">'isPropChanged method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should return bool showing if prop was changed after the last set'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>, <span class="hljs-attribute">y</span>: <span class="hljs-number">10</span>
      byte.props.x = <span class="hljs-string">'20px'</span>
      expect(byte.isPropChanged <span class="hljs-string">'x'</span>).toBe <span class="hljs-literal">true</span>
      byte.props.x = <span class="hljs-string">'20px'</span>
      expect(byte.isPropChanged <span class="hljs-string">'x'</span>).toBe <span class="hljs-literal">false</span>
    it <span class="hljs-string">'should add prop object to lastSet if undefined'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: <span class="hljs-number">25</span>, <span class="hljs-attribute">y</span>: <span class="hljs-number">10</span>
      byte.isPropChanged(<span class="hljs-string">'x'</span>)
      expect(byte.lastSet.x).toBeDefined()

  describe <span class="hljs-string">'delta calculations -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should skip delta for excludePropsDelta object'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>: {<span class="hljs-number">45</span>: <span class="hljs-number">55</span>}
      byte.skipPropsDelta = <span class="hljs-attribute">radius</span>: <span class="hljs-number">1</span>
      byte.extendDefaults()
      expect(byte.deltas.radius).<span class="hljs-keyword">not</span>.toBeDefined()

    describe <span class="hljs-string">'numeric values -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      it <span class="hljs-string">'should calculate delta'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-number">25</span>: <span class="hljs-number">75</span>}
        radiusDelta = byte.deltas.radius
        expect(radiusDelta.start)   .toBe   <span class="hljs-number">25</span>
        expect(radiusDelta.delta)   .toBe   <span class="hljs-number">50</span>
        expect(radiusDelta.type)    .toBe   <span class="hljs-string">'number'</span>
      it <span class="hljs-string">'should calculate delta with string arguments'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-string">'75'</span>}
        radiusDelta = byte.deltas.radius
        expect(radiusDelta.start)   .toBe   <span class="hljs-number">25</span>
        expect(radiusDelta.delta)   .toBe   <span class="hljs-number">50</span>
      it <span class="hljs-string">'should calculate delta with float arguments'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25.50'</span>: <span class="hljs-number">75.50</span>}
        radiusDelta = byte.deltas.radius
        expect(radiusDelta.start)   .toBe   <span class="hljs-number">25.5</span>
        expect(radiusDelta.delta)   .toBe   <span class="hljs-number">50</span>
      it <span class="hljs-string">'should calculate delta with negative start arguments'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'-25.50'</span>: <span class="hljs-number">75.50</span>}
        radiusDelta = byte.deltas.radius
        expect(radiusDelta.start)   .toBe   -<span class="hljs-number">25.5</span>
        expect(radiusDelta.delta)   .toBe   <span class="hljs-number">101</span>
      it <span class="hljs-string">'should calculate delta with negative end arguments'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25.50'</span>: -<span class="hljs-number">75.50</span>}
        radiusDelta = byte.deltas.radius
        expect(radiusDelta.start)   .toBe   <span class="hljs-number">25.5</span>
        expect(radiusDelta.end)     .toBe   -<span class="hljs-number">75.5</span>
        expect(radiusDelta.delta)   .toBe   -<span class="hljs-number">101</span>
    describe <span class="hljs-string">'color values -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      it <span class="hljs-string">'should calculate color delta'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">stroke</span>:  {<span class="hljs-string">'#000'</span>: <span class="hljs-string">'rgb(255,255,255)'</span>}
        colorDelta = byte.deltas.stroke
        expect(colorDelta.start.r)    .toBe   <span class="hljs-number">0</span>
        expect(colorDelta.end.r)      .toBe   <span class="hljs-number">255</span>
        expect(colorDelta.delta.r)    .toBe   <span class="hljs-number">255</span>
        expect(colorDelta.type)       .toBe   <span class="hljs-string">'color'</span>
      it <span class="hljs-string">'should ignore stroke-linecap prop, use start prop and warn'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-literal">null</span>
        spyOn <span class="hljs-built_in">console</span>, <span class="hljs-string">'warn'</span>
<span class="hljs-function">        <span class="hljs-title">fun</span> = -&gt;</span> byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">strokeLinecap</span>:  {<span class="hljs-string">'round'</span>: <span class="hljs-string">'butt'</span>}
        expect(<span class="hljs-function">-&gt;</span> fun()).<span class="hljs-keyword">not</span>.toThrow()
        expect(<span class="hljs-built_in">console</span>.warn).toHaveBeenCalled()
        expect(byte.deltas.strokeLinecap).<span class="hljs-keyword">not</span>.toBeDefined()
    
    describe <span class="hljs-string">'unit values -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      it <span class="hljs-string">'should calculate unit delta'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">x</span>:  {<span class="hljs-string">'0%'</span>: <span class="hljs-string">'100%'</span>}
        xDelta = byte.deltas.x
        expect(xDelta.start.string)    .toBe   <span class="hljs-string">'0%'</span>
        expect(xDelta.end.string)      .toBe   <span class="hljs-string">'100%'</span>
        expect(xDelta.delta)          .toBe   <span class="hljs-number">100</span>
        expect(xDelta.type)            .toBe   <span class="hljs-string">'unit'</span>
    describe <span class="hljs-string">'tween-related values -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      it <span class="hljs-string">'should not calc delta for tween related props'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte
          <span class="hljs-attribute">duration</span>:  { <span class="hljs-number">2000</span>: <span class="hljs-number">1000</span> }
          <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
        expect(byte.deltas.duration).<span class="hljs-keyword">not</span>.toBeDefined()
  
  describe <span class="hljs-string">'setProgress method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should set transition progress'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25.50'</span>: -<span class="hljs-number">75.50</span>}
      byte.setProgress .<span class="hljs-number">5</span>
      expect(byte.progress).toBe .<span class="hljs-number">5</span>
    it <span class="hljs-string">'should set value progress'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
      byte.setProgress .<span class="hljs-number">5</span>
      expect(byte.props.radius).toBe <span class="hljs-number">50</span>
    it <span class="hljs-string">'should call calcOrigin method'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
      spyOn byte, <span class="hljs-string">'calcOrigin'</span>
      byte.setProgress .<span class="hljs-number">5</span>
      expect(byte.calcOrigin).toHaveBeenCalled()
    it <span class="hljs-string">'should have origin object'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
      byte.setProgress .<span class="hljs-number">5</span>
      expect(byte.origin.x).toBeDefined()
      expect(byte.origin.y).toBeDefined()
    it <span class="hljs-string">'should have origin should be the center of the transit'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
      byte.setProgress .<span class="hljs-number">5</span>
      expect(byte.origin.x).toBe byte.props.center
      expect(byte.origin.y).toBe byte.props.center
    it <span class="hljs-string">'should have origin should be x/y if foreign context'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:{<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}, <span class="hljs-attribute">ctx</span>: svg
      byte.setProgress .<span class="hljs-number">5</span>
      expect(byte.origin.x).toBe parseFloat byte.props.x
      expect(byte.origin.y).toBe parseFloat byte.props.x
    it <span class="hljs-string">'should have origin should be number if foreign context'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:{<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}, <span class="hljs-attribute">ctx</span>: svg
      byte.setProgress .<span class="hljs-number">5</span>
      expect(<span class="hljs-keyword">typeof</span> byte.origin.x).toBe <span class="hljs-string">'number'</span>
      expect(<span class="hljs-keyword">typeof</span> byte.origin.y).toBe <span class="hljs-string">'number'</span>

    it <span class="hljs-string">'should call calcCurrentProps'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
      spyOn byte, <span class="hljs-string">'calcCurrentProps'</span>
      byte.setProgress .<span class="hljs-number">5</span>
      expect(byte.calcCurrentProps).toHaveBeenCalledWith .<span class="hljs-number">5</span>
    
    it <span class="hljs-string">'should not call onUpdate if isShow was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
      spyOn byte, <span class="hljs-string">'onUpdate'</span>
      byte.setProgress .<span class="hljs-number">5</span>, <span class="hljs-literal">true</span>
      expect(byte.onUpdate).<span class="hljs-keyword">not</span>.toHaveBeenCalled()
    it <span class="hljs-string">'not to thow'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}, <span class="hljs-attribute">ctx</span>: svg
      expect(<span class="hljs-function">-&gt;</span> byte.show()).<span class="hljs-keyword">not</span>.toThrow()
    it <span class="hljs-string">'should set color value progress and only int'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">stroke</span>:  {<span class="hljs-string">'#000'</span>: <span class="hljs-string">'rgb(255,255,255)'</span>}
      colorDelta = byte.deltas.stroke
      byte.setProgress .<span class="hljs-number">5</span>
      expect(byte.props.stroke).toBe <span class="hljs-string">'rgba(127,127,127,1)'</span>
    it <span class="hljs-string">'should set color value progress for delta starting with 0'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">stroke</span>:  {<span class="hljs-string">'#000'</span>: <span class="hljs-string">'rgb(0,255,255)'</span>}
      colorDelta = byte.deltas.stroke
      byte.setProgress .<span class="hljs-number">5</span>
      expect(byte.props.stroke).toBe <span class="hljs-string">'rgba(0,127,127,1)'</span>
    it <span class="hljs-string">'should set 0 if progress is less then 0'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
      byte.setProgress -<span class="hljs-number">1</span>
      expect(byte.progress).toBe <span class="hljs-number">0</span>
    it <span class="hljs-string">'should set 1 if progress is greater then 1'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
      byte.setProgress <span class="hljs-number">2</span>
      expect(byte.progress).toBe <span class="hljs-number">1</span>

  describe <span class="hljs-string">'strokeDash.. values'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should set strokeDasharray/strokeDashoffset value progress'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">strokeDasharray</span>:  {<span class="hljs-string">'200 100'</span>: <span class="hljs-string">'400'</span>}
      byte.setProgress .<span class="hljs-number">5</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">0</span>].value).toBe <span class="hljs-number">300</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">0</span>].unit) .toBe <span class="hljs-string">'px'</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">1</span>].value).toBe <span class="hljs-number">50</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">1</span>].unit) .toBe <span class="hljs-string">'px'</span>

    it <span class="hljs-string">'should set strokeDasharray/strokeDashoffset with percents'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">type</span>: <span class="hljs-string">'circle'</span>
        <span class="hljs-attribute">strokeDasharray</span>:  {<span class="hljs-string">'0% 200'</span>: <span class="hljs-string">'100%'</span>}
        <span class="hljs-attribute">radius</span>: <span class="hljs-number">100</span>
        <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
        
      byte.setProgress .<span class="hljs-number">5</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">0</span>].value).toBe <span class="hljs-number">50</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">0</span>].unit) .toBe <span class="hljs-string">'%'</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">1</span>].value).toBe <span class="hljs-number">100</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">1</span>].unit) .toBe <span class="hljs-string">'px'</span>

    it <span class="hljs-string">'should parse non-deltas strokeDasharray/strokeDashoffset values'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">type</span>: <span class="hljs-string">'circle'</span>
        <span class="hljs-attribute">strokeDasharray</span>:  <span class="hljs-string">'100%'</span>
        <span class="hljs-attribute">radius</span>: <span class="hljs-number">100</span>
        <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">0</span>].value).toBe <span class="hljs-number">100</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">0</span>].unit).toBe <span class="hljs-string">'%'</span>

    it <span class="hljs-string">'should parse multiple strokeDash.. values'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">strokeDasharray</span>: <span class="hljs-string">'7 100 7'</span>
        <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
      
      expect(h.isArray(byte.props.strokeDasharray)).toBe <span class="hljs-literal">true</span>
      expect(byte.props.strokeDasharray.length).toBe <span class="hljs-number">3</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">0</span>].value).toBe <span class="hljs-number">7</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">1</span>].value).toBe <span class="hljs-number">100</span>
      expect(byte.props.strokeDasharray[<span class="hljs-number">2</span>].value).toBe <span class="hljs-number">7</span>

    it <span class="hljs-string">'should parse num values'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">strokeDasharray</span>: <span class="hljs-number">7</span>
        <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
      
      expect(h.isArray(byte.props.strokeDasharray)).toBe <span class="hljs-literal">true</span>
      expect(byte.props.strokeDasharray.length)    .toBe <span class="hljs-number">1</span>

  describe <span class="hljs-string">'Callbacks -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    describe <span class="hljs-string">'onStart callback -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      it <span class="hljs-string">'should call onStart callback'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
        isOnStart = <span class="hljs-literal">null</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}, <span class="hljs-attribute">onStart</span>:<span class="hljs-function">-&gt;</span> isOnStart = <span class="hljs-literal">true</span>
        setTimeout -&gt;
          expect(isOnStart).toBe(<span class="hljs-literal">true</span>); dfr()
        , <span class="hljs-number">300</span>
      it <span class="hljs-string">'should have scope of byte'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
        isRightScope = <span class="hljs-literal">null</span>
        byte = <span class="hljs-keyword">new</span> Byte
          <span class="hljs-attribute">radius</span>: {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
          <span class="hljs-attribute">onStart</span>:<span class="hljs-function">-&gt;</span> isRightScope = @ <span class="hljs-keyword">instanceof</span> Byte
        setTimeout -&gt;
          expect(isRightScope).toBe(<span class="hljs-literal">true</span>); dfr()
        , <span class="hljs-number">300</span>
      it <span class="hljs-string">'should show el'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
        spyOn byte, <span class="hljs-string">'show'</span>
        byte.tween.setProgress .<span class="hljs-number">5</span>
        expect(byte.show).toHaveBeenCalled()

    describe <span class="hljs-string">'onUpdate callback'</span>, <span class="hljs-function">-&gt;</span>
      it <span class="hljs-string">'should call onUpdate callback'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
        isOnUpdate = <span class="hljs-literal">null</span>
        byte = <span class="hljs-keyword">new</span> Byte
          <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
          <span class="hljs-attribute">onUpdate</span>:<span class="hljs-function">-&gt;</span> isOnUpdate = <span class="hljs-literal">true</span>

        setTimeout -&gt;
          expect(<span class="hljs-string">'onUpdate called'</span>).toBe(<span class="hljs-string">'onUpdate called'</span>); dfr()
        , <span class="hljs-number">300</span>

      it <span class="hljs-string">'should have scope of byte'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
        isRightScope = <span class="hljs-literal">null</span>
        byte = <span class="hljs-keyword">new</span> Byte
          <span class="hljs-attribute">radius</span>: {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
          <span class="hljs-attribute">onUpdate</span>:<span class="hljs-function">-&gt;</span> isRightScope = @ <span class="hljs-keyword">instanceof</span> Byte
        setTimeout (<span class="hljs-function">-&gt;</span> expect(isRightScope).toBe(<span class="hljs-literal">true</span>); dfr()), <span class="hljs-number">300</span>

      it <span class="hljs-string">'should set current progress'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
        progress = <span class="hljs-literal">null</span>
        byte = <span class="hljs-keyword">new</span> Byte
          <span class="hljs-attribute">radius</span>: {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
          <span class="hljs-attribute">onUpdate</span>:<span class="hljs-function"><span class="hljs-params">(p)</span>-&gt;</span> progress = p
          <span class="hljs-attribute">duration</span>: <span class="hljs-number">64</span>
        setTimeout -&gt;
          expect(progress).toBeGreaterThan <span class="hljs-number">0</span>
          expect(progress).<span class="hljs-keyword">not</span>.toBeGreaterThan <span class="hljs-number">1</span>
          dfr()
        , <span class="hljs-number">300</span>

    describe <span class="hljs-string">'onComplete callback -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      it <span class="hljs-string">'should call onComplete callback'</span>,<span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
        isOnComplete = <span class="hljs-literal">null</span>
        byte = <span class="hljs-keyword">new</span> Byte
          <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
          <span class="hljs-attribute">onComplete</span>:<span class="hljs-function">-&gt;</span> isOnComplete = <span class="hljs-literal">true</span>
          <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>
        setTimeout -&gt;
          expect(isOnComplete).toBe(<span class="hljs-literal">true</span>); dfr()
        , <span class="hljs-number">300</span>
      it <span class="hljs-string">'should have scope of byte'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
        isRightScope = <span class="hljs-literal">null</span>
        byte = <span class="hljs-keyword">new</span> Byte
          <span class="hljs-attribute">radius</span>: {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
          <span class="hljs-attribute">duration</span>: <span class="hljs-number">20</span>
          <span class="hljs-attribute">onComplete</span>:<span class="hljs-function">-&gt;</span>
            isRightScope = @ <span class="hljs-keyword">instanceof</span> Byte
        setTimeout -&gt;
          expect(isRightScope).toBe(<span class="hljs-literal">true</span>); dfr()
        , <span class="hljs-number">300</span>

    describe <span class="hljs-string">'onFirstUpdateBackward callback -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      it <span class="hljs-string">'should call tuneOptions method when the tween goes backward'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
          .<span class="hljs-keyword">then</span> { <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span> }
        spyOn byte, <span class="hljs-string">'tuneOptions'</span>
        byte.tween.setProgress .<span class="hljs-number">99</span>
        byte.tween.setProgress <span class="hljs-number">0</span>
        expect(byte.tuneOptions).toHaveBeenCalled()

      it <span class="hljs-string">'should call not tuneOptions if history length is one record'</span>, <span class="hljs-function">-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
        spyOn byte, <span class="hljs-string">'tuneOptions'</span>
        byte.tween.setProgress .<span class="hljs-number">99</span>
        byte.tween.setProgress <span class="hljs-number">0</span>
        expect(byte.tuneOptions).<span class="hljs-keyword">not</span>.toHaveBeenCalled()

  describe <span class="hljs-string">'createTween method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should create tween object'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
      expect(byte.tween).toBeDefined()
    it <span class="hljs-string">'should bind the onFirstUpdateBackward metod'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
      expect(<span class="hljs-keyword">typeof</span> byte.timeline.o.onFirstUpdateBackward)
        .toBe <span class="hljs-string">'function'</span>
    it <span class="hljs-string">'should start tween after init'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
      isStarted = <span class="hljs-literal">false</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>: {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
        <span class="hljs-attribute">onStart</span>:<span class="hljs-function">-&gt;</span> isStarted = <span class="hljs-literal">true</span>
      setTimeout -&gt;
        expect(isStarted).toBe(<span class="hljs-literal">true</span>); dfr()
      , <span class="hljs-number">100</span>
    it <span class="hljs-string">'should not start tween after init is isRunLess was passed'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
      isStarted = <span class="hljs-literal">null</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">radius</span>: {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
        <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
        <span class="hljs-attribute">onStart</span>:<span class="hljs-function">-&gt;</span> isStarted = <span class="hljs-literal">true</span>
      setTimeout -&gt;
        expect(isStarted).toBeFalsy(); dfr()
      , <span class="hljs-number">100</span>
    describe <span class="hljs-string">'startTween method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
      it <span class="hljs-string">'should start tween'</span>, <span class="hljs-function"><span class="hljs-params">(dfr)</span>-&gt;</span>
        byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radius</span>:  {<span class="hljs-string">'25'</span>: <span class="hljs-number">75</span>}
        spyOn byte.tween, <span class="hljs-string">'start'</span>
        byte.startTween()
        setTimeout -&gt;
          expect(byte.tween.start).toHaveBeenCalled(); dfr()
        , <span class="hljs-number">10</span>

  describe <span class="hljs-string">'easing -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should set easing option to props'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">easing</span>: <span class="hljs-string">'Linear.None'</span>
      expect(byte.props.easing).toBe <span class="hljs-string">'Linear.None'</span>

  describe <span class="hljs-string">'run method-&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should extend defaults with passed object'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">strokeWidth</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      spyOn byte, <span class="hljs-string">'extendDefaults'</span>
      o = { <span class="hljs-attribute">strokeWidth</span>: <span class="hljs-number">20</span> }
      byte.run(o)
      expect(byte.extendDefaults).toHaveBeenCalledWith o
    it <span class="hljs-string">'should not extend defaults if object was not passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">strokeWidth</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      spyOn byte, <span class="hljs-string">'extendDefaults'</span>
      byte.run()
      expect(byte.extendDefaults).<span class="hljs-keyword">not</span>.toHaveBeenCalled()
    it <span class="hljs-string">'should not override deltas'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">strokeWidth</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      byte.run <span class="hljs-attribute">stroke</span>: <span class="hljs-string">'green'</span>
      expect(byte.deltas.strokeWidth).toBeDefined()

    it <span class="hljs-string">'should calculate el size'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">radius</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      spyOn byte, <span class="hljs-string">'calcSize'</span>
      byte.run <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>
      expect(byte.calcSize).toHaveBeenCalled()
    it <span class="hljs-string">'should set new el size'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">radius</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      spyOn byte, <span class="hljs-string">'setElStyles'</span>
      byte.run <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>
      expect(byte.setElStyles).toHaveBeenCalled()
    it <span class="hljs-string">'should set new el size #2'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">radius</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      byte.run <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>
      expect(byte.el.style.width).toBe <span class="hljs-string">'104px'</span>

    it <span class="hljs-string">'should set new el size with respect to radiusX/radiusY'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">radius</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      byte.run <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>, <span class="hljs-attribute">radiusX</span>: {<span class="hljs-number">100</span>: <span class="hljs-number">0</span>}
      expect(byte.el.style.width).toBe <span class="hljs-string">'204px'</span>

    it <span class="hljs-string">'should set new el size with respect to radiusX/radiusY'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">radius</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      byte.run <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>, <span class="hljs-attribute">radiusY</span>: <span class="hljs-number">110</span>
      expect(byte.el.style.width).toBe <span class="hljs-string">'224px'</span>

    it <span class="hljs-string">'should set new el size with respect to radiusX/radiusY'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">radius</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      byte.run <span class="hljs-attribute">radius</span>: <span class="hljs-number">450</span>, <span class="hljs-attribute">radiusY</span>: <span class="hljs-number">110</span>, <span class="hljs-attribute">radiusX</span>: {<span class="hljs-number">200</span>:<span class="hljs-number">0</span>}
      expect(byte.el.style.width).toBe <span class="hljs-string">'404px'</span>

    it <span class="hljs-string">'should start tween'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">strokeWidth</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      spyOn byte, <span class="hljs-string">'startTween'</span>
      byte.run()
      expect(byte.startTween).toHaveBeenCalled()
    it <span class="hljs-string">'should accept new options'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">strokeWidth</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      byte.run <span class="hljs-attribute">strokeWidth</span>: <span class="hljs-number">25</span>
      expect(byte.props.strokeWidth).toBe <span class="hljs-number">25</span>
      expect(byte.deltas.strokeWidth).<span class="hljs-keyword">not</span>.toBeDefined()
    it <span class="hljs-string">'should not modify old options'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">strokeWidth</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">radius</span>: <span class="hljs-number">33</span>, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      byte.run <span class="hljs-attribute">strokeWidth</span>: <span class="hljs-number">25</span>
      expect(byte.props.radius).toBe <span class="hljs-number">33</span>
    it <span class="hljs-string">'should call setProgress(0, true)'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">radius</span>: {<span class="hljs-number">10</span>: <span class="hljs-number">5</span>}, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      spyOn byte, <span class="hljs-string">'setProgress'</span>
      byte.run <span class="hljs-attribute">radius</span>: <span class="hljs-number">50</span>
      expect(byte.setProgress).toHaveBeenCalledWith <span class="hljs-number">0</span>, <span class="hljs-literal">true</span>
    it <span class="hljs-string">'should warn if type was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">type</span>: <span class="hljs-string">'polygon'</span>, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>)
      spyOn byte.h, <span class="hljs-string">'warn'</span>
      byte.run <span class="hljs-attribute">type</span>: <span class="hljs-string">'circle'</span>
      expect(byte.h.warn).toHaveBeenCalled()
      expect(byte.o.type).toBe <span class="hljs-string">'polygon'</span>
    it <span class="hljs-string">'should set new options on timeline'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
        <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">500</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">200</span>, <span class="hljs-attribute">repeat</span>: <span class="hljs-number">1</span>, <span class="hljs-attribute">easing</span>: <span class="hljs-string">'cubic.in'</span>
        <span class="hljs-attribute">yoyo</span>: <span class="hljs-literal">true</span>
        <span class="hljs-attribute">onStart</span>:    <span class="hljs-function">-&gt;</span>
        <span class="hljs-attribute">onComplete</span>: <span class="hljs-function">-&gt;</span>
      onStart = (<span class="hljs-function">-&gt;</span>); onComplete = (<span class="hljs-function">-&gt;</span>)
      byte.run
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">2000</span>, <span class="hljs-attribute">delay</span>: <span class="hljs-number">0</span>, <span class="hljs-attribute">repeat</span>: <span class="hljs-number">2</span>, <span class="hljs-attribute">easing</span>: <span class="hljs-string">'linear.none'</span>
        <span class="hljs-attribute">onStart</span>: onStart, <span class="hljs-attribute">onComplete</span>: onComplete, <span class="hljs-attribute">yoyo</span>: <span class="hljs-literal">false</span>
      expect(byte.timeline.o.duration).toBe     <span class="hljs-number">2000</span>
      expect(byte.timeline.o.delay).toBe        <span class="hljs-number">0</span>
      expect(byte.timeline.o.repeat).toBe       <span class="hljs-number">2</span>
      expect(byte.timeline.o.easing).toBe       <span class="hljs-string">'linear.none'</span>
      expect(byte.timeline.o.onStart).toBe      onStart
      expect(byte.timeline.o.onComplete).toBe   onComplete
      expect(byte.timeline.o.yoyo).toBe         <span class="hljs-literal">false</span>
    it <span class="hljs-string">'should call recalcDuration on tween'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      spyOn byte.tween, <span class="hljs-string">'recalcDuration'</span>
      byte.run <span class="hljs-attribute">duration</span>: <span class="hljs-number">2000</span>
      expect(byte.tween.recalcDuration).toHaveBeenCalled()

    it <span class="hljs-string">'should call transformHistory'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      spyOn byte, <span class="hljs-string">'transformHistory'</span>
      o = <span class="hljs-attribute">duration</span>: <span class="hljs-number">2000</span>
      byte.run o
      expect(byte.transformHistory).toHaveBeenCalledWith o

    it <span class="hljs-string">'should not call transformHistory if optionless'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      spyOn byte, <span class="hljs-string">'transformHistory'</span>
      byte.run()
      expect(byte.transformHistory).<span class="hljs-keyword">not</span>.toHaveBeenCalled()

    it <span class="hljs-string">'shoud warn if tweenValues changed on run'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(
        <span class="hljs-attribute">isRunLess</span>:  <span class="hljs-literal">true</span>, <span class="hljs-attribute">duration</span>:  <span class="hljs-number">2000</span>
      ).<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">40</span>
      spyOn h, <span class="hljs-string">'warn'</span>
      byte.run
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">100</span>
        <span class="hljs-attribute">delay</span>:    <span class="hljs-number">100</span>
        <span class="hljs-attribute">repeat</span>:   <span class="hljs-number">1</span>
        <span class="hljs-attribute">yoyo</span>:     <span class="hljs-literal">false</span>
        <span class="hljs-attribute">easing</span>:   <span class="hljs-string">'Linear.None'</span>
        <span class="hljs-attribute">onStart</span>:    <span class="hljs-function">-&gt;</span>
        <span class="hljs-attribute">onUpdate</span>:   <span class="hljs-function">-&gt;</span>
        <span class="hljs-attribute">onComplete</span>: <span class="hljs-function">-&gt;</span>
      expect(h.warn).toHaveBeenCalled()
      expect(byte.history[<span class="hljs-number">0</span>].duration).toBe <span class="hljs-number">2000</span>
      expect(byte.props.duration)     .toBe <span class="hljs-number">2000</span>

    it <span class="hljs-string">'shoud not warn if history is 1 record long'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">isRunLess</span>:  <span class="hljs-literal">true</span>, <span class="hljs-attribute">duration</span>:  <span class="hljs-number">2000</span>)
      spyOn h, <span class="hljs-string">'warn'</span>
      byte.run
        <span class="hljs-attribute">duration</span>: <span class="hljs-number">100</span>
        <span class="hljs-attribute">delay</span>:    <span class="hljs-number">100</span>
        <span class="hljs-attribute">repeat</span>:   <span class="hljs-number">1</span>
        <span class="hljs-attribute">yoyo</span>:     <span class="hljs-literal">false</span>
        <span class="hljs-attribute">easing</span>:   <span class="hljs-string">'Linear.None'</span>
        <span class="hljs-attribute">onStart</span>:    <span class="hljs-function">-&gt;</span>
        <span class="hljs-attribute">onUpdate</span>:   <span class="hljs-function">-&gt;</span>
        <span class="hljs-attribute">onComplete</span>: <span class="hljs-function">-&gt;</span>
      expect(h.warn).<span class="hljs-keyword">not</span>.toHaveBeenCalled()
      expect(byte.history[<span class="hljs-number">0</span>].duration).toBe <span class="hljs-number">100</span>
      expect(byte.props.duration)     .toBe <span class="hljs-number">100</span>
    it <span class="hljs-string">'shoud work with no arguments passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte(<span class="hljs-attribute">isRunLess</span>:  <span class="hljs-literal">true</span>, <span class="hljs-attribute">duration</span>:  <span class="hljs-number">2000</span>)
        .<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">500</span>
      expect(<span class="hljs-function">-&gt;</span> byte.run()).<span class="hljs-keyword">not</span>.toThrow()

  describe <span class="hljs-string">'isForeign flag -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should not be set by default'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      expect(byte.isForeign).toBe <span class="hljs-literal">false</span>
    it <span class="hljs-string">'should be set if context was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">ctx</span>: svg
      expect(byte.isForeign).toBe <span class="hljs-literal">true</span>
    it <span class="hljs-string">'if context passed el should be bit\'s el'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">ctx</span>: svg
      expect(byte.el).toBe byte.bit.el

  describe <span class="hljs-string">'show/hide on start/end -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should show the el on start'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">ctx</span>: svg
      byte.tween.setProgress .<span class="hljs-number">5</span>
      expect(byte.el.style.display).toBe <span class="hljs-string">'block'</span>

    it <span class="hljs-string">'should hide the el on end'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">ctx</span>: svg
      byte.tween.setProgress <span class="hljs-number">1</span>
      expect(byte.el.style.display).toBe <span class="hljs-string">'none'</span>

    it <span class="hljs-string">'should not hide the el on end if isShowEnd was passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">ctx</span>: svg, <span class="hljs-attribute">isShowEnd</span>: <span class="hljs-literal">true</span>
      byte.tween.setProgress <span class="hljs-number">1</span>
      expect(byte.el.style.display).toBe <span class="hljs-string">'block'</span>

    it <span class="hljs-string">'should not hide the el on end if isShowEnd was passed #2 - chain'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">ctx</span>: svg, <span class="hljs-attribute">isShowEnd</span>: <span class="hljs-literal">true</span>, <span class="hljs-attribute">isRunLess</span>: <span class="hljs-literal">true</span>
        .<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">10</span>
        .<span class="hljs-keyword">then</span> <span class="hljs-attribute">radius</span>: <span class="hljs-number">20</span>
      byte.tween.setProgress <span class="hljs-number">1</span>
      expect(byte.el.style.display).toBe <span class="hljs-string">'block'</span>

    it <span class="hljs-string">'should hide the el on reverse end'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">ctx</span>: svg
      byte.tween.setProgress .<span class="hljs-number">5</span>
      byte.tween.setProgress <span class="hljs-number">0</span>
      expect(byte.el.style.display).toBe <span class="hljs-string">'none'</span>

    it <span class="hljs-string">'should not hide the el on reverse end if isShowInit passed'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">ctx</span>: svg, <span class="hljs-attribute">isShowInit</span>: <span class="hljs-literal">true</span>
      byte.tween.setProgress .<span class="hljs-number">5</span>
      byte.tween.setProgress <span class="hljs-number">0</span>
      expect(byte.el.style.display).toBe <span class="hljs-string">'block'</span>

  describe <span class="hljs-string">'getRadiusSize method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should return max from delatas if key is defined'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">20</span>: <span class="hljs-number">30</span>
      size = byte.getRadiusSize <span class="hljs-attribute">key</span>: <span class="hljs-string">'radiusX'</span>, <span class="hljs-attribute">fallback</span>: <span class="hljs-number">0</span>
      expect(size).toBe <span class="hljs-number">30</span>

    it <span class="hljs-string">'should return props\' value if delats\' one is not defined '</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">radiusX</span>: <span class="hljs-number">20</span>
      size = byte.getRadiusSize <span class="hljs-attribute">key</span>: <span class="hljs-string">'radiusX'</span>, <span class="hljs-attribute">fallback</span>: <span class="hljs-number">0</span>
      expect(size).toBe <span class="hljs-number">20</span>

    it <span class="hljs-string">'should fallback to passed fallback option'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      size = byte.getRadiusSize <span class="hljs-attribute">key</span>: <span class="hljs-string">'radiusX'</span>, <span class="hljs-attribute">fallback</span>: <span class="hljs-number">0</span>
      expect(size).toBe <span class="hljs-number">0</span>

    it <span class="hljs-string">'should fallback to 0 by default'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte
      size = byte.getRadiusSize <span class="hljs-attribute">key</span>: <span class="hljs-string">'radiusX'</span>
      expect(size).toBe <span class="hljs-number">0</span>

  describe <span class="hljs-string">'foreign bit option -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should recieve a foreign bit to work with'</span>, <span class="hljs-function">-&gt;</span>
      svg  = <span class="hljs-built_in">document</span>.createElementNS?(ns, <span class="hljs-string">'svg'</span>)
      bit  = <span class="hljs-built_in">document</span>.createElementNS?(ns, <span class="hljs-string">'rect'</span>)
      svg.appendChild bit
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">bit</span>: bit
      expect(byte.bit.el).toBe bit

    it <span class="hljs-string">'should set isForeignBit flag'</span>, <span class="hljs-function">-&gt;</span>
      svg  = <span class="hljs-built_in">document</span>.createElementNS?(ns, <span class="hljs-string">'svg'</span>)
      bit  = <span class="hljs-built_in">document</span>.createElementNS?(ns, <span class="hljs-string">'rect'</span>)
      svg.appendChild bit
      byte = <span class="hljs-keyword">new</span> Byte <span class="hljs-attribute">bit</span>: bit
      expect(byte.isForeignBit).toBe <span class="hljs-literal">true</span>

  describe <span class="hljs-string">'getBitLength method'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should call getLength method on bit'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte()
      spyOn byte.bit, <span class="hljs-string">'getLength'</span>
      byte.getBitLength()
      expect(byte.bit.getLength).toHaveBeenCalled()

    it <span class="hljs-string">'should cache the value to props'</span>, <span class="hljs-function">-&gt;</span>
      byte = <span class="hljs-keyword">new</span> Byte()
      byte.props.bitLength = <span class="hljs-literal">null</span>
      byte.getBitLength()
      expect(byte.props.bitLength).<span class="hljs-keyword">not</span>.toBe <span class="hljs-literal">null</span>




</div></div>
      
      </div>
    
    </div>
  </div>

  <script src="../../toc.js"></script>
  <script src="../../assets/libs.js"></script>
  <script src="../../assets/behavior.js"></script>

  
    
      <script>
        
      </script>
    
  
</body>
</html>