<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title> - bezier-easing.coffee</title>

  <link rel="stylesheet" href="../../assets/style.css">
  
    
      <style>
        
      </style>
    
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>
  <meta name="groc-relative-root" content="../../"/>
  <meta name="groc-document-path" content="../spec/bezier-easing.coffee"/>
  
</head>
<body>
  <div id="file-area">
    <div id="meta">
      <code class="file-path">
      
        <a href="https://github.com/legomushroom/mojs.git/blob/master/../spec/bezier-easing.coffee">../spec/bezier-easing.coffee</a>
      
      </code>
    </div>
    <div id="document">
    
      <div class="segment">
      
      
        <div class="code"><div class="wrapper">bezier = mojs.easing.bezier

describe <span class="hljs-string">'bezier easing -&gt;'</span>, <span class="hljs-function">-&gt;</span>
  it <span class="hljs-string">'should be a function'</span>, <span class="hljs-function">-&gt;</span>
    expect(<span class="hljs-keyword">typeof</span> bezier).toBe <span class="hljs-string">'function'</span>
  it <span class="hljs-string">'should return a function'</span>, <span class="hljs-function">-&gt;</span>
    expect(<span class="hljs-keyword">typeof</span> bezier(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)).toBe <span class="hljs-string">'function'</span>
  describe <span class="hljs-string">'linear curves -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'shoud be linear'</span>, <span class="hljs-function">-&gt;</span>
      bezier1 = bezier(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>); bezier2 = bezier <span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>
      samples = <span class="hljs-number">100</span>
      <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>.samples]
        x = i / samples
        expect(bezier1(x)).toBe bezier2(x)
        expect(bezier1(x)).toBe x
        expect(bezier1(x)).toBeDefined()
  describe <span class="hljs-string">'common props -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should be the right value at extremes'</span>, <span class="hljs-function">-&gt;</span>
      <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..<span class="hljs-number">1000</span>]
        a = Math.random(); b = <span class="hljs-number">2</span>*Math.random()-<span class="hljs-number">0.5</span>
        c = Math.random(); d = <span class="hljs-number">2</span>*Math.random()-<span class="hljs-number">0.5</span>
        easing = bezier(a,b,c,d)
        expect(easing(<span class="hljs-number">0</span>)).toBe <span class="hljs-number">0</span>
        expect(easing(<span class="hljs-number">1</span>)).toBe <span class="hljs-number">1</span>
    it <span class="hljs-string">'should approach the projected value of its x=y projected curve'</span>, <span class="hljs-function">-&gt;</span>
      samples = <span class="hljs-number">1000</span>
      <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>..samples]
        x = i / samples
        a = Math.random(); b = Math.random()
        c = Math.random(); d = Math.random()
        easing    = bezier(a,b,c,d)
        projected = bezier(b,a,d,c)
<span class="hljs-function">        <span class="hljs-title">composed</span>  = <span class="hljs-params">(x)</span>-&gt;</span> projected easing x
        expect(x).toBeCloseTo composed(x), .<span class="hljs-number">05</span>
  describe <span class="hljs-string">'two same instances -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should be strictly equal'</span>, <span class="hljs-function">-&gt;</span>
      samples = <span class="hljs-number">100</span>
      <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>.samples]
        a = Math.random(); b = <span class="hljs-number">2</span>*Math.random()-<span class="hljs-number">0.5</span>
        c = Math.random(); d = <span class="hljs-number">2</span>*Math.random()-<span class="hljs-number">0.5</span>
        x = i/samples
        expect(bezier(a,b,c,d)(x)).toBe bezier(a,b,c,d)(x)

  describe <span class="hljs-string">'symetric curves -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should have a central value y~=0.5 at x=0.5'</span>, <span class="hljs-function">-&gt;</span>
      samples = <span class="hljs-number">100</span>
      <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>.samples]
        a = Math.random(); b = <span class="hljs-number">2</span>*Math.random()-<span class="hljs-number">0.5</span>
        c = <span class="hljs-number">1</span>-a; d = <span class="hljs-number">1</span>-b; easing = bezier(a,b,c,d)
        expect(easing(.<span class="hljs-number">5</span>)).toBeCloseTo .<span class="hljs-number">5</span>, .<span class="hljs-number">000001</span>

    it <span class="hljs-string">'should be symetrical'</span>, <span class="hljs-function">-&gt;</span>
      samples = <span class="hljs-number">100</span>
      <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0.</span>.samples]
        a = Math.random(); b = <span class="hljs-number">2</span>*Math.random()-<span class="hljs-number">0.5</span>
        c = <span class="hljs-number">1</span>-a; d = <span class="hljs-number">1</span>-b; easing = bezier(a,b,c,d)
<span class="hljs-function">        <span class="hljs-title">sym</span> = <span class="hljs-params">(x)</span>-&gt;</span> <span class="hljs-number">1</span> - easing(<span class="hljs-number">1</span>-x)
        x = i/samples
        expect(easing(x)).toBeCloseTo sym(x), .<span class="hljs-number">0000000001</span>

  describe <span class="hljs-string">'toStr method -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should return params, the function was called with'</span>, <span class="hljs-function">-&gt;</span>
      expect(bezier(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>).toStr()).toBe <span class="hljs-string">'bezier(0,1,0,1)'</span>


  describe <span class="hljs-string">'arguments parsing -&gt;'</span>, <span class="hljs-function">-&gt;</span>
    it <span class="hljs-string">'should error if no arguments'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier()).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if 1 argument'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(<span class="hljs-number">1</span>)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if 2 arguments'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if 3 arguments'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if 3 arguments'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if string argument'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-string">'a'</span>)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if NaN argument'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, NaN)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if Infinity argument'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, Infinity)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if Infinity argument'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>, Infinity)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if x &lt; 0'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, -<span class="hljs-number">5</span>, <span class="hljs-number">0.5</span>)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if x &lt; 0 #2'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(-<span class="hljs-number">2</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.5</span>)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if x &lt; 0 #3'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(-Math.random()-<span class="hljs-number">0.000001</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if x &gt; 1'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">5</span>, <span class="hljs-number">0.5</span>)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if x &gt; 1 #2'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(<span class="hljs-number">2</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0.5</span>)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
    it <span class="hljs-string">'should error if x &gt; 1 #3'</span>, <span class="hljs-function">-&gt;</span>
      spyOn mojs.h, <span class="hljs-string">'error'</span>
      expect(bezier(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">1.000001</span>+Math.random(), <span class="hljs-number">0.5</span>)).toBe <span class="hljs-literal">undefined</span>
      expect(mojs.h.error).toHaveBeenCalled()
</div></div>
      
      </div>
    
    </div>
  </div>

  <script src="../../toc.js"></script>
  <script src="../../assets/libs.js"></script>
  <script src="../../assets/behavior.js"></script>

  
    
      <script>
        
      </script>
    
  
</body>
</html>