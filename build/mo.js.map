{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 04f1631950a294e471c5","webpack:///./src/class-proto.babel.js","webpack:///./src/tween/tween-defaults.babel.js","webpack:///./src/tween/planner.babel.js","webpack:///./src/tween/tweener.babel.js","webpack:///./src/tween/tween.babel.js","webpack:///./src/mojs.babel.js"],"names":["ClassProto","o","_o","_init","_declareDefaults","_extendDefaults","_vars","_defaults","_props","attr","value","key","_assignProp","duration","delay","repeat","speed","isYoyo","easing","backwardEasing","name","nameBase","onProgress","onStart","onRefresh","onComplete","onRepeatStart","onRepeatComplete","onFirstUpdate","onUpdate","isChained","onPlaybackStart","onPlaybackPause","onPlaybackStop","onPlaybackComplete","callbacksContext","onSetStartTime","onInternalUpdate","Planner","_originalDelay","_originalDuration","_normalizeDelayAndDuration","_plan","_calcTotalTime","length","step","time","_totalTime","prevPeriod","_getPeriod","period","nextPeriod","prevFrame","frameSnapshot","push","isPrevFrame","undefined","isPrevDelay","lastIndex","TTime","elapsed","Math","round","floor","getVisiblityEvent","document","mozHidden","msHidden","webkitHidden","Tweener","_listenVisibilityChange","tweens","_loop","bind","_savedTweens","_onVisibilityChange","_isRunning","update","window","performance","now","requestAnimationFrame","tween","index","indexOf","splice","hidden","_visibilityHidden","_visibilityChange","addEventListener","_savePlayingTweens","_restorePlayingTweens","slice","i","pause","resume","remove","onTweenerFinish","_prevTime","_startLoop","removeEventListener","Tween","_planner","createPlan","_elapsed","_frameIndex","_startTime","snapshot","mask","props","deltaTime","_envokeCallBacks","_setStartTime","add","mojs","revision","tweener","__helpers__","TweenPlanner","tweenDefaults","onload","setTimeout","tw","play"],"mappings":"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","file":"mo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mojs\"] = factory();\n\telse\n\t\troot[\"mojs\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 04f1631950a294e471c5","/**\n * ClassProto - base class for module.\n * It is needed to:\n *   - declare `_defaults`\n *   - extend `_defaults` by `options` and save result to `_props`\n *   - declare `_vars` after extention\n *   - call `_render` eventually\n */\nclass ClassProto {\n  constructor (o = {}) {\n    // save options\n    this._o = o;\n\n    this._init();\n    this._declareDefaults();\n    this._extendDefaults();\n    this._vars();\n  }\n\n  /**\n   * _init - lifecycle initialization function.\n   *\n   * @private\n   */\n  _init() {}\n\n  /**\n   * _declareDefaults - function to declare `_defaults` object.\n   *\n   * @private\n   */\n  _declareDefaults() { this._defaults = {}; }\n\n  /**\n   * _extendDefaults - Method to copy `_o` options to `_props` object\n   *                  with fallback to `_defaults`.\n   * @private\n   */\n  _extendDefaults() {\n    this._props  = {\n      ...this._defaults,\n      ...this._o\n    };\n  }\n\n  /**\n   * _setProp - Method to set property on the module.\n   *\n   * @private\n   * @param {String, Object} Name of the property to set\n   *                         or object with properties to set.\n   * @param {Any} Value for the property to set. Could be\n   *              undefined if the first param is object.\n   */\n  _setProp(attr, value) {\n    if ( typeof attr === 'object' ) {\n      for ( var key in attr ) { this._assignProp( key, attr[key] ); }\n    } else { this._assignProp( attr, value ); }\n  }\n\n  /**\n   * _assignProp - Method to assign single property's value.\n   *\n   * @private\n   * @param {String} Property name.\n   * @param {Any}    Property value.\n   */\n  _assignProp(key, value) { this._props[key] = value; }\n\n  /**\n   * _vars - function do declare `variables` after `_defaults` were extended\n   *         by `options` and saved to `_props`\n   *\n   * @return {type}  description\n   */\n  _vars() {}\n\n  /**\n   * _render - method to render on initialization.\n   */\n  _render() {}\n}\n\nexport default ClassProto;\n\n\n\n// WEBPACK FOOTER //\n// ./src/class-proto.babel.js","export default {\n  /* duration of the tween [0..∞] */\n  duration:               350,\n  /* delay of the tween [-∞..∞] */\n  delay:                  0,\n  /* repeat of the tween [0..∞], means how much to\n     repeat the tween regardless first run,\n     for instance repeat: 2 will make the tween run 3 times */\n  repeat:                 0,\n  /* speed of playback [0..∞], speed that is less then 1\n     will slowdown playback, for instance .5 will make tween\n     run 2x slower. Speed of 2 will speedup the tween to 2x. */\n  speed:                  1,\n  /*  flip onUpdate's progress on each even period.\n      note that callbacks order won't flip at least\n      for now (under consideration). */\n  isYoyo:                   false,\n  /* easing for the tween, could be any easing type [link to easing-types.md] */\n  easing:                 'Sin.Out',\n  /*\n    Easing for backward direction of the tweenthe tween,\n    if `null` - fallbacks to `easing` property.\n    forward direction in `yoyo` period is treated as backward for the easing.\n  */\n  backwardEasing:         null,\n  /* custom tween's name */\n  name:                   null,\n  /* custom tween's base name */\n  nameBase:               'Tween',\n  /*\n    onProgress callback runs before any other callback.\n    @param {Number}   The entire, not eased, progress\n                      of the tween regarding repeat option.\n    @param {Boolean}  The direction of the tween.\n                      `true` for forward direction.\n                      `false` for backward direction(tween runs in reverse).\n  */\n  onProgress:             function() {},\n  /*\n    onStart callback runs on very start of the tween just after onProgress\n    one. Runs on very end of the tween if tween is reversed.\n    @param {Boolean}  Direction of the tween.\n                      `true` for forward direction.\n                      `false` for backward direction(tween runs in reverse).\n  */\n  onStart:                function() {},\n  onRefresh:              function() {},\n  onComplete:             function() {},\n  onRepeatStart:          function() {},\n  onRepeatComplete:       function() {},\n  onFirstUpdate:          function() {},\n  onUpdate:               function() {},\n  isChained:              false,\n  // playback callbacks, these fire only when\n  // `play`, `replay`, `playBackward`, `replayBackward` were called\n  onPlaybackStart:        function() {},\n  onPlaybackPause:        function() {},\n  onPlaybackStop:         function() {},\n  onPlaybackComplete:     function() {},\n  // context which all callbacks will be called with\n  callbacksContext:       null,\n  // callback for `setting` start time event\n  onSetStartTime:         function () {},\n  onInternalUpdate:       function () {}\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/tween/tween-defaults.babel.js","import ClassProto from '../class-proto';\nimport defaults from './tween-defaults';\n\nexport default class Planner extends ClassProto {\n  /**\n   * _declareDefaults - function to declare module defaults.\n   *                    In this case defaults are the `tween defaults`\n   *                    since we will plan for tween.\n   *\n   * @private\n   */\n  _declareDefaults() { return this._defaults = {...defaults}; }\n\n  /**\n   * _extendDefaults - Method to copy `_o` options to `_props` object\n   *                  with fallback to `_defaults`.\n   * @private\n   */\n  _extendDefaults() {\n    super._extendDefaults();\n\n    const { delay, duration, speed } = this._props;\n    // save the original `delay` property\n    this._originalDelay = delay;\n    // save the original `duration` property\n    this._originalDuration = duration;\n    // normalize `delay` and `duration` regarding `speed`\n    this._normalizeDelayAndDuration();\n  }\n\n  /**\n   * _normalizeDelayAndDuration - function to normalize `delay` and `duration`\n   *                              regarding `speed` property.\n   *\n   * @return {type}  description\n   */\n  _normalizeDelayAndDuration() {\n    const { speed } = this._props;\n    // normalize `delay` regarding `speed`\n    this._props.delay = this._originalDelay/speed;\n    // normalize `duration` regarding `speed`\n    this._props.duration = this._originalDuration/speed;\n  }\n\n  /**\n   * _vars - function do declare `variables` after `_defaults` were extended\n   *         by `options` and saved to `_props`\n   *\n   * @return {type}  description\n   */\n  _vars() {\n    this._plan = [];\n\n    // get total duration time\n    this._calcTotalTime();\n  }\n\n  /**\n   * createPlan - function to create an tween animation plan.\n   *\n   * @public\n   */\n  createPlan() {\n    // reset plan\n    this._plan.length = 0;\n    // recalculate total duration time\n    this._calcTotalTime();\n\n    // frame size (60fps)\n    const step = 16;\n    // current time\n    let time = 0;\n\n    while (time < this._totalTime) {\n      const prevPeriod = this._getPeriod(time - step);\n      const period = this._getPeriod(time);\n      const nextPeriod = this._getPeriod(time + step);\n      const prevFrame = this._plan[this._plan.length-1];\n      let frameSnapshot = 0;\n\n      if (period === 'delay') {\n        this._plan.push(frameSnapshot);\n        time += step;\n        continue;\n      }\n\n      // onUpdate\n      frameSnapshot = frameSnapshot | (1 << 3);\n\n      const isPrevFrame = prevFrame !== undefined;\n\n      if (!isPrevFrame) {\n        // onStart\n        frameSnapshot = frameSnapshot | (1 << 1);\n      }\n\n      const isPrevDelay = prevPeriod === 'delay';\n      // onRepeatStart\n      if (!isPrevFrame || isPrevDelay || prevPeriod === period - 1) {\n        frameSnapshot = frameSnapshot | (1 << 2);\n      }\n\n      // onRepeatComplete\n      if (nextPeriod === 'delay' || nextPeriod === period + 1) {\n        frameSnapshot = frameSnapshot | (1 << 4);\n      }\n\n      this._plan.push(frameSnapshot);\n\n      time += step;\n    }\n\n    // onComplete\n    const lastIndex = this._plan.length - 1;\n    this._plan[lastIndex] = this._plan[lastIndex] | (1 << 5);\n\n    return this._plan;\n  }\n\n\n  /**\n   * _calcBounds - function to calculate `totalTime`\n   *\n   * @return {type}  description\n   */\n  _calcTotalTime() {\n    const { delay, duration, repeat } = this._props;\n    const time = duration + delay;\n\n    this._totalTime = (time * (repeat + 1)) - delay;\n  }\n\n  /**\n   * _getPeriod - Method to get current period number.\n   *\n   * @private\n   * @param {Number} Time to get the period for.\n   * @returns {Number} Current period number.\n   */\n  _getPeriod(time) {\n    const { delay, duration } = this._props;\n    /**\n     * Time normalization. Since we omit the first `delay` period when setting\n     * a starttime, we can drop the first `delay` period entirely, but here,\n     * we need to add the `delay` pretending the delay already elapsed.\n     */\n    time += delay;\n\n    const TTime = delay + duration;\n    let period = time / TTime;\n    // if time if equal to endTime we need to set the elapsed\n    // time to 0 to fix the occasional precision js bug, which\n    // causes 0 to be something like 1e-12\n    const elapsed = (time < this._totalTime) ? time % TTime : 0;\n    // If the latest period, round the result, otherwise floor it.\n    // Basically we always can floor the result, but because of js\n    // precision issues, sometimes the result is 2.99999998 which\n    // will result in 2 instead of 3 after the floor operation.\n    period = (time >= this._totalTime) ? Math.round(period) : Math.floor(period);\n    // if time is larger then the end time\n    if (time > this._totalTime) {\n      // set equal to the periods count\n      period = Math.round(this._totalTime / TTime );\n    // if in delay gap, set _delayT to current\n    // period number and return \"delay\"\n    } else if (elapsed > 0 && elapsed < delay) {\n      period = 'delay';\n    }\n    // if the end of period and there is a delay\n    return period;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/tween/planner.babel.js","/**\n * Helper to get cross-brower `visibility change` event.\n */\nconst getVisiblityEvent = () => {\n  if (typeof document.mozHidden !== \"undefined\") {\n    return [\"mozHidden\", \"mozvisibilitychange\"];\n  } else if (typeof document.msHidden !== \"undefined\") {\n    return [\"msHidden\", \"msvisibilitychange\"];\n  } else if (typeof document.webkitHidden !== \"undefined\") {\n    return [\"webkitHidden\", \"webkitvisibilitychange\"];\n  }\n\n  return ['hidden', 'visibilitychange'];\n};\n\n/**\n * Tweener - singleton object that is responsible of:\n *  - starting `requestAnimationFrame` loop\n *  - stopping `requestAnimationFrame` loop\n *  - holding `tween`/`timeline` objects and passing current time to them.\n */\n  class Tweener {\n    constructor() {\n      this._vars();\n      this._listenVisibilityChange();\n      return this;\n    }\n\n    _vars () {\n      this.tweens = [];\n      this._loop = this._loop.bind(this);\n      this._savedTweens = [];\n      this._onVisibilityChange = this._onVisibilityChange.bind(this);\n    }\n\n    /*\n     Main animation loop. Should have only one concurrent loop.\n     @private\n     @returns this\n    */\n    _loop() {\n     if (!this._isRunning) { return false; }\n     this.update(window.performance.now());\n     if (!this.tweens.length) { return this._isRunning = false; }\n     requestAnimationFrame(this._loop);\n     return this;\n    }\n    /*\n     Method to start animation loop.\n     @private\n    */\n    _startLoop() {\n     if (this._isRunning) { return; }; this._isRunning = true\n     requestAnimationFrame(this._loop);\n    }\n    /*\n     Method to stop animation loop.\n     @private\n    */\n    _stopLoop() { this._isRunning = false; }\n\n    /*\n     Method stop updating all the child tweens/timelines.\n     @private\n    */\n    removeAll() { this.tweens.length = 0; }\n    /*\n     Method to remove specific tween/timeline form updating.\n     @private\n    */\n    remove(tween) {\n     var index = (typeof tween === 'number')\n       ? tween\n       : this.tweens.indexOf(tween);\n\n     if (index !== -1) {\n       tween = this.tweens[index];\n       if ( tween ) {\n         tween._isRunning = false;\n         this.tweens.splice(index, 1);\n        //  tween._onTweenerRemove();\n       }\n     }\n    }\n\n    /*\n     Method to initialize event listeners to visibility change events.\n     @private\n    */\n    _listenVisibilityChange () {\n    if (typeof document.hidden !== \"undefined\") {\n     this._visibilityHidden = \"hidden\";\n     this._visibilityChange = \"visibilitychange\";\n    } else if (typeof document.mozHidden !== \"undefined\") {\n     this._visibilityHidden = \"mozHidden\";\n     this._visibilityChange = \"mozvisibilitychange\";\n    } else if (typeof document.msHidden !== \"undefined\") {\n     this._visibilityHidden = \"msHidden\";\n     this._visibilityChange = \"msvisibilitychange\";\n    } else if (typeof document.webkitHidden !== \"undefined\") {\n     this._visibilityHidden = \"webkitHidden\";\n     this._visibilityChange = \"webkitvisibilitychange\";\n    }\n\n    document.addEventListener(this._visibilityChange,\n      this._onVisibilityChange, false);\n  }\n\n  /*\n   Method that will fire on visibility change.\n  */\n  _onVisibilityChange () {\n   if (document[this._visibilityHidden]) { this._savePlayingTweens() }\n   else { this._restorePlayingTweens(); }\n  }\n  /*\n   Method to save all playing tweens.\n   @private\n  */\n  _savePlayingTweens () {\n   this._savedTweens = this.tweens.slice(0);\n   for (let i = 0; i < this._savedTweens.length; i++ ) {\n     this._savedTweens[i].pause();\n   }\n  }\n\n  /*\n   Method to restore all playing tweens.\n   @private\n  */\n  _restorePlayingTweens () {\n   for (let i = 0; i < this._savedTweens.length; i++ ) {\n     this._savedTweens[i].resume();\n   }\n  }\n\n  /*\n   Method to update every tween/timeline on animation frame.\n   @private\n  */\n  update(time) {\n   var i = this.tweens.length;\n   while(i--) {\n     // cache the current tween\n     var tween = this.tweens[i];\n     if (tween && tween.update(time) === true) {\n       this.remove(tween);\n       tween.onTweenerFinish();\n       tween._prevTime = undefined;\n     }\n   }\n  }\n\n  /*\n   Method to add a Tween/Timeline to loop pool.\n   @param {Object} Tween/Timeline to add.\n  */\n  add(tween) {\n   // return if tween is already running\n   if ( tween._isRunning ) { return; }\n   tween._isRunning = true;\n   this.tweens.push(tween);\n   this._startLoop();\n  }\n\n  /**\n   * caffeinate - function to keep tweener awake on page blur.\n   *\n   * @public\n   */\n  caffeinate() {\n    document.removeEventListener(this._visibilityChange,\n      this._onVisibilityChange, false);\n  }\n }\n\n export default new Tweener;\n\n\n\n// WEBPACK FOOTER //\n// ./src/tween/tweener.babel.js","import ClassProto from '../class-proto';\nimport defaults from './tween-defaults';\nimport TweenPlanner from './planner';\nimport tweener from './tweener';\n\nexport default class Tween extends ClassProto {\n  /**\n   * _declareDefaults - function to declare module defaults.\n   *                    In this case defaults are the `tween defaults`\n   *                    since we will plan for tween.\n   * @private\n   */\n  _declareDefaults() { return this._defaults = {...defaults}; }\n\n  /**\n   * _vars - function do declare `variables` after `_defaults` were extended\n   *         by `options` and saved to `_props`\n   */\n  _vars() {\n    this._planner = new TweenPlanner(this._o);\n\n    /**\n     * TODO: cover\n     */\n    this._plan = this._planner.createPlan();\n\n    /**\n     * TODO: cover\n     */\n    this._totalTime = this._planner._totalTime;\n\n    /**\n     * TODO: cover\n     */\n    this._elapsed = 0;\n    this._frameIndex = 0;\n  }\n\n  /**\n   * _setStartTime - function to set animation start time.\n   *\n   * @private\n   * @param {Number} Time to set.\n   */\n  _setStartTime(time) {\n    if (time === undefined) { time = performance.now(); }\n    this._startTime = time;\n  }\n\n  /**\n   * _envokeCallBacks - function to envoke callbacks regarding frame snapshot.\n   *\n   * @private\n   * @param {Number} Frame snapshot.\n   */\n  _envokeCallBacks(snapshot) {\n    if (snapshot === 0) { return; };\n    let mask = 1;\n\n    const props = this._props;\n\n    (snapshot & (mask <<= 1)) && props.onStart();\n    (snapshot & (mask <<= 1)) && props.onRepeatStart();\n    (snapshot & (mask <<= 1)) && props.onUpdate();\n    (snapshot & (mask <<= 1)) && props.onRepeatComplete();\n    (snapshot & (mask <<= 1)) && props.onComplete();\n  }\n\n  /**\n   * update - function to envoke callbacks regarding current time.\n   *\n   * @public\n   * @param {Number} Current time.\n   */\n  update(time) {\n    const deltaTime = time - this._startTime;\n\n    if (deltaTime > this._totalTime) {\n      while (this._frameIndex < this._plan.length) {\n        const snapshot = this._plan[this._frameIndex];\n        this._envokeCallBacks(snapshot);\n        this._elapsed += 16;\n        this._frameIndex++;\n      }\n      return true;\n    }\n\n    while (this._elapsed <= deltaTime) {\n      const snapshot = this._plan[this._frameIndex];\n      this._envokeCallBacks(snapshot);\n      this._elapsed += 16;\n      this._frameIndex++;\n    }\n  }\n\n  /**\n   * play - description\n   *\n   * @public\n   * @return {Object} This tween.\n   */\n  play() {\n    this._setStartTime();\n    tweener.add(this);\n    return this;\n  }\n\n  /**\n   * onTweenerFinish - callback that will be invoked when\n   *                   `tween` playback completed.\n   *\n   */\n  onTweenerFinish() {}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/tween/tween.babel.js","import Tween from './tween/tween';\n\nimport ClassProto from './class-proto';\nimport TweenPlanner from './tween/planner';\nimport tweenDefaults from './tween/tween-defaults';\nimport tweener from './tween/tweener';\n\nvar mojs = {\n  revision: '2.0.0',\n  Tween,\n  tweener,\n  __helpers__: {\n    ClassProto,\n    TweenPlanner,\n    tweenDefaults\n  }\n};\n\nwindow.onload = () => {\n  setTimeout(() => {\n    for (let i = 0; i < 20000; i++) {\n      const tw = new mojs.Tween({\n        duration: 2000,\n        onUpdate() {\n          // (i === 0) && console.log( 'update' );\n        },\n        onStart() {\n          // (i === 0) && console.log( 'start' );\n        },\n        onRepeatStart() {\n          // (i === 0) && console.log( 'repeatStart' );\n        },\n        onRepeatComplete() {\n          // (i === 0) && console.log( 'repeatComplete' );\n        },\n        onComplete() {\n          // (i === 0) && console.log( 'complete' );\n        }\n      }).play();\n    }\n  }, 2000);\n};\n\nexport default mojs;\n\n\n\n// WEBPACK FOOTER //\n// ./src/mojs.babel.js"],"sourceRoot":""}